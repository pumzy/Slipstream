{"version":3,"sources":["webpack:///webpack/bootstrap ad5c3f32994152146669","webpack:///./~/pica/lib/mathlib.js","webpack:///./~/pica/lib/mathlib/resize_convolve_js.js","webpack:///./~/pica/lib/mathlib/resize_filter_gen.js","webpack:///./~/pica/lib/utils.js","webpack:///./~/webworkify/index.js","webpack:///./lib/platform.js","webpack:///./lib/vehicle.js","webpack:///./~/glur/mono16.js","webpack:///./~/object-assign/index.js","webpack:///./~/pica/index.js","webpack:///./~/pica/lib/mathlib/lightness16_js.js","webpack:///./~/pica/lib/mathlib/resize_filter_info.js","webpack:///./~/pica/lib/mathlib/resize_js.js","webpack:///./~/pica/lib/mathlib/unsharp_js.js","webpack:///./~/pica/lib/mathlib/wasm/math_wasm_base64.js","webpack:///./~/pica/lib/pool.js","webpack:///./~/pica/lib/tiler.js","webpack:///./~/pica/lib/worker.js","webpack:///./lib/obstacle.js","webpack:///./lib/powerup.js","webpack:///./lib/slipstream.js","webpack:///./lib/platform-arrays.js"],"names":["Obstacle","PowerCube","PlatformArrays","platforms","initialPlatforms","init","context","token","gennum","i","length","strokeStyle","lineWidth","strokeRect","x","y","width","obstacles","restartFind","powercubes","clearpowercubes","id","clearObstacles","move","speed","popped","generatePlatforms","endoflast","newplatforms","concat","platformGenerator","clearPlatforms","player","jumping","direction","doublejumping","falling","vehicleimg","Image","src","platform","doublejumpstart","doublejumped","falljumpstart","startpos","resetVehicle","drawImage","plat","canvas","$","getContext","window","keypress","e","keyCode","preventDefault","keyup","obstacleimage","push","platformID","num","filter","obstacle","calcCubes","image","randomno","Math","floor","random","cube","includes","powercube","Vehicle","Platform","document","addEventListener","height","interval_id","previousplatform","score","pause","clicked","gamePaused","lives","started","ended","startScreen","clearRect","fillText","endScreen","beginPath","globalCompositeOperation","globalAlpha","fillStyle","fillRect","pausebutton","gamebackground","drawLives","currentpos","arc","PI","fill","stroke","setInterval","console","log","onPlatform","array","currentPlatform","cp","clearInterval","inPCA","currentCube","font","handlePause","handleClick","horizontalpos","clientX","target","offsetLeft","verticalpos","clientY","offsetTop","cubes","j","click","widthGenerator","slice"],"mappings":";AAAA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;;;AAGA;AACA;;AAEA;AACA;;AAEA;AACA,mDAA2C,cAAc;;AAEzD;AACA;AACA;AACA;AACA;AACA;AACA;AACA,aAAK;AACL;AACA;;AAEA;AACA;AACA;AACA,mCAA2B,0BAA0B,EAAE;AACvD,yCAAiC,eAAe;AAChD;AACA;AACA;;AAEA;AACA,8DAAsD,+DAA+D;;AAErH;AACA;;AAEA;AACA;;;;;;;;AChEA;AACA;AACA;AACA;AACA;AACA;;;AAGA;AACA;;;AAGA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;;AAGA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA,iCAAiC;;AAEjC;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA,OAAO;AACP;AACA;AACA;AACA,OAAO;;AAEP;AACA;;AAEA;AACA;;;AAGA,sCAAsC;AACtC;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA,OAAO;AACP,KAAK;AACL;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA,GAAG;;AAEH;AACA;;;AAGA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;;AAGA;AACA;AACA;;;AAGA;AACA;AACA;;AAEA;;AAEA;AACA;AACA,qBAAqB,iBAAiB,mBAAmB;AACzD;;AAEA;AACA;AACA;;;;AAIA;AACA;AACA;AACA;AACA,CAAC;;;AAGD;AACA;AACA;AACA;AACA;;AAEA,sCAAsC,gBAAgB;AACtD;AACA;AACA;AACA;AACA;;;AAGA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA,2BAA2B,QAAQ,GAAG,KAAK,GAAG,MAAM,GAAG,OAAO,GAAG,QAAQ;AACzE,2BAA2B,QAAQ,GAAG,KAAK,GAAG,MAAM,GAAG,OAAO,GAAG,QAAQ;;AAEzE;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA,qCAAqC;;AAErC;;AAEA;AACA;AACA,sCAAsC,uBAAuB;AAC7D;AACA;AACA;AACA;AACA;AACA;AACA;AACA,OAAO;AACP;AACA;AACA;AACA,OAAO;AACP;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;;AAEA;AACA;;;AAGA;;;;;;;;AClTA;AACA;AACA;;;AAGA;AACA;;;AAGA,sBAAsB,wCAAwC;;;AAG9D;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA,gBAAgB,aAAa;AAC7B;;AAEA;AACA,mBAAmB,eAAe;AAClC;AACA;AACA;;AAEA;;AAEA;;AAEA;AACA,YAAY,gBAAgB;AAC5B;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;;AAEA;AACA,gBAAgB,aAAa;AAC7B;;AAEA;AACA,mBAAmB,eAAe;AAClC;AACA;AACA;;AAEA;;AAEA;;AAEA;AACA,YAAY,gBAAgB;AAC5B;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;;AAGA;AACA;AACA;AACA;;;;;;;;ACvIA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;AAGA;;AAEA;AACA;;;AAGA;AACA;AACA;;;AAGA;;AAEA;;AAEA;AACA,2CAA2C;;AAE3C;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;;AAEA;AACA,qBAAqB,sBAAsB;;AAE3C;AACA;;AAEA;AACA;;AAEA;AACA;AACA;;AAEA;;AAEA;AACA,iCAAiC,gBAAgB;AACjD;AACA;AACA;AACA;;AAEA;AACA;;AAEA,iBAAiB,0BAA0B;AAC3C;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA,oDAAoD;AACpD,mDAAmD;;AAEnD;AACA;AACA;AACA,OAAO;AACP;AACA,gCAAgC,sBAAsB;AACtD;AACA;AACA;AACA,KAAK;AACL;AACA,0CAA0C;AAC1C,0CAA0C;AAC1C;AACA;AACA;AACA;;;;;;;;ACvHA;;;AAGA,wBAAwB,4CAA4C;;;AAGpE;AACA;AACA;;AAEA;AACA;AACA;;;AAGA;AACA;AACA;AACA;;;AAGA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,WAAW;AACX;AACA;AACA;AACA;AACA;AACA;AACA,OAAO;;AAEP;AACA,KAAK;AACL;AACA;;;AAGA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;AAGA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA,KAAK;AACL,GAAG;AACH;AACA;;;AAGA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;;AAEA;;AAEA,mBAAmB,WAAW;AAC9B;AACA;AAC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CA;AACA;AACA;AACA,GAAG;AACH,kCAAkC;AAClC;AACA;AACA;;AAEA;AACA,EAAE;AACF;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA,gBAAgB,sBAAsB;AACtC;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA,kBAAkB,oBAAoB;AACtC;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;;;;;;;ACzFA;;;AAGA;AACA;;;AAGA;AACA;AACA;AACA;AACA;;;AAGA;AACA;AACA;;;AAGA;AACA;AACA;AACA;AACA;AACA,CAAC;;;AAGD;AACA;AACA;AACA;;;AAGA;AACA;AACA;AACA;AACA;AACA;;;AAGA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;;AAGA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;AAGA;AACA;;AAEA;AACA;;AAEA,wDAAwD;;AAExD,0BAA0B,yBAAyB;;AAEnD;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;;AAEA;AACA;;;AAGA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,OAAO;AACP;AACA;;;AAGA;;AAEA;AACA;AACA;;AAEA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA,uDAAsD;AACtD;AACA;;AAEA;AACA,8BAA8B,6BAA6B;;AAE3D;AACA;AACA,SAAS;AACT;AACA;AACA;AACA,OAAO;AACP;AACA;;AAEA;AACA;AACA;AACA,GAAG;;AAEH;AACA;AACA;AACA;AACA;;AAEA;AACA,GAAG;;AAEH;AACA;;AAEA;AACA;;;AAGA;AACA;;;AAGA;;AAEA;AACA,yBAAyB,mBAAmB;AAC5C,GAAG;AACH;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA,eAAe,iBAAiB,YAAY,EAAE;AAC9C,eAAe,iBAAiB,WAAW;AAC3C;AACA;;AAEA,mCAAmC,6BAA6B;;AAEhE;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,OAAO;AACP;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;;AAEA;;AAEA;;AAEA;AACA;;AAEA,iDAAiD,6BAA6B;;AAE9E;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;;AAEA;AACA,OAAO;AACP;;AAEA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;;AAEA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA,WAAW;AACX,SAAS;AACT,OAAO;AACP;;;AAGA;AACA;;AAEA;;AAEA;AACA;AACA;;AAEA;AACA;AACA,OAAO;AACP;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA,iDAAiD,6BAA6B;AAC9E;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;;AAEA;;AAEA;;AAEA;;AAEA;AACA;AACA;AACA;AACA,WAAW;AACX;AACA;AACA;;AAEA;AACA;AACA,aAAa;AACb;AACA,uDAAuD,QAAQ;AAC/D;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA,WAAW;AACX;AACA;AACA;AACA;;AAEA;AACA,SAAS;AACT,KAAK;;;AAGL;AACA;AACA;AACA;AACA,wCAAwC,6BAA6B;AACrE;AACA;;AAEA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA,WAAW;AACX;;AAEA;AACA,KAAK;AACL;AACA;;AAEA;;AAEA;AACA;AACA;AACA;;AAEA,+BAA+B;;AAE/B;AACA;AACA;AACA;AACA;AACA;AACA;AACA,OAAO;;AAEP;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA,oBAAoB;AACpB,SAAS;AACT,gBAAgB,WAAW,WAAW;AACtC;AACA,KAAK;AACL,GAAG;AACH;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;;;AAGA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA,mBAAmB,SAAS;AAC5B;AACA;;AAEA,oCAAoC,iBAAiB;AACrD,GAAG;AACH;;;AAGA;;;AAGA;;;;;;;;AC1fA;AACA;AACA;;;AAGA;AACA;AACA;AACA;AACA,iBAAiB,UAAU;AAC3B;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;;;AClBA;AACA;AACA;AACA;AACA;AACA;;;AAGA;AACA,GAAG;AACH;AACA;AACA;AACA;AACA,GAAG;AACH,GAAG;AACH;AACA;AACA,kCAAkC,YAAY;AAC9C,sDAAsD,YAAY;AAClE;AACA;AACA;AACA,GAAG;AACH,GAAG;AACH;AACA;AACA,kCAAkC,YAAY;AAC9C,sDAAsD,YAAY;AAClE;AACA;AACA;AACA,GAAG;AACH,GAAG;AACH;AACA;AACA,kCAAkC,YAAY;AAC9C,sDAAsD,YAAY;AAClE;AACA;AACA;AACA;AACA;;;;;;;;AC1CA;;;AAGA;AACA;AACA;;;AAGA;AACA;AACA,qBAAqB,iBAAiB,mBAAmB;AACzD;;;AAGA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA,uDAAuD,WAAW;;AAElE;;AAEA,2BAA2B,QAAQ,GAAG,KAAK,GAAG,MAAM,GAAG,OAAO,GAAG,QAAQ;AACzE,2BAA2B,QAAQ,GAAG,KAAK,GAAG,MAAM,GAAG,OAAO,GAAG,QAAQ;;AAEzE;AACA;;AAEA;AACA;;AAEA;;AAEA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;;AAEA;;AAEA;AACA;;;AAGA;;;;;;;;AC5DA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;AAGA;AACA;;;AAGA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA,0CAA0C;;AAE1C;;AAEA;AACA;;AAEA;;AAEA,iBAAiB,UAAU;AAC3B;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA,gEAAgE;AAChE;AACA,iCAAiC;;AAEjC;AACA;AACA,OAAO;AACP;AACA;AACA,6DAA6D;AAC7D;AACA;AACA;AACA,kEAAkE;AAClE;;AAEA;AACA;AACA;AACA;AACA,OAAO;AACP;AACA;;AAEA;AACA;AACA;AACA;AACA,OAAO;AACP;AACA;AACA;AACA;AACA;AACA;AACA,yCAAyC;AACzC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;;;;;;;AClHA;AACA;AACA;;AAEA;AACA;;;;;;;;ACLA;;;AAGA;;;AAGA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;;AAGA;AACA;;AAEA;AACA;AACA,GAAG;AACH;AACA;AACA;AACA;AACA;AACA;AACA;;;AAGA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;;;AAGA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA,GAAG;;AAEH;AACA;AACA,GAAG;AACH;AACA;AACA;;;AAGA;;;;;;;;AChEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;;AAEA,8CAA8C,gBAAgB;AAC9D;AACA;;AAEA;AACA;;AAEA,8CAA8C,gBAAgB;AAC9D;AACA;;;AAGA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA,kBAAkB,2BAA2B;AAC7C,oBAAoB,0BAA0B;AAC9C;AACA,kBAAkB,OAAO;AACzB;AACA;AACA;AACA;;AAEA;AACA,kBAAkB,OAAO;AACzB;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;;;;;;;;ACpFA;;AAEA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;;AAEA;;AAEA;AACA;AACA,qBAAqB,MAAM;AAC3B;AACA;;AAEA;AACA,mBAAmB,SAAS;AAC5B,KAAK;AACL;AACA;;;;;;;;;;;;;;;AC1BA;;;;;;AAEO,IAAIuB,wCAAgB,IAAInB,KAAJ,EAApB;AACPmB,cAAclB,GAAd,GAAoB,4BAApB;;AAeO,IAAItB,gCAAY,EAAhB;;AAEP;AACA;;;AAIO,IAAMZ,sBAAO,SAAPA,IAAO,CAACC,OAAD,EAAUkC,QAAV,EAAoBnB,EAApB,EAA2B;AAC7C;AACA;;AAEA,MAAI,CAACJ,UAAUI,EAAV,CAAL,EAAmB;AACjBJ,cAAUyC,IAAV,CAAe,EAAC5C,GAAI0B,SAAS1B,CAAT,GAAa,GAAlB,EAAwBC,GAAGyB,SAASzB,CAAT,GAAa,EAAxC,EAA4C4C,YAAYtC,EAAxD,EAAf;AACD;;AAED,OAAK,IAAIZ,IAAI,CAAb,EAAgBA,IAAIQ,UAAUP,MAA9B,EAAsCD,GAAtC,EAA2C;AACzCH,YAAQwC,SAAR,CAAkBW,aAAlB,EAAgCxC,UAAUR,CAAV,EAAaK,CAA7C,EAA+CG,UAAUR,CAAV,EAAaM,CAA5D,EAA8D,EAA9D,EAAiE,EAAjE;AACD;;AAGD,SAAOE,UAAUI,EAAV,CAAP;AACD,CAdM;;AAgBA,IAAME,sBAAO,SAAPA,IAAO,CAACjB,OAAD,EAAUkC,QAAV,EAAoBnB,EAApB,EAA2B;AAC7C,OAAK,IAAIZ,IAAI,CAAb,EAAgBA,IAAIQ,UAAUP,MAA9B,EAAsCD,GAAtC,EAA2C;AACzC,QAAGA,MAAMY,EAAT,EAAaJ,UAAUR,CAAV,EAAaK,CAAb,GAAiB0B,SAAS1B,CAAT,GAAa,GAA9B;AACbR,YAAQwC,SAAR,CAAkBW,aAAlB,EAAgCxC,UAAUR,CAAV,EAAaK,CAA7C,EAA+CG,UAAUR,CAAV,EAAaM,CAA5D,EAA8D,EAA9D,EAAiE,EAAjE;AACD;AACD,SAAOE,UAAUI,EAAV,CAAP;AACD,CANM;;AAQA,IAAMC,0CAAiB,SAAjBA,cAAiB,CAACsC,GAAD,EAAS;AACrC,MAAIA,GAAJ,EAAQ;AACN,YAjCO3C,SAiCP,eAAYA,UAAU4C,MAAV,CAAiB;AAAA,aAAYC,SAASH,UAAT,IAAuBC,GAAnC;AAAA,KAAjB,CAAZ;AACD,GAFD,MAEO,QAlCE3C,SAkCF,eAAY,EAAZ;AACR,CAJM;;AAMA,IAAMC,oCAAc,SAAdA,WAAc,CAACG,EAAD,EAAQ;AACjC,SAAOJ,UAAU4C,MAAV,CAAiB;AAAA,WACtBC,SAASH,UAAT,KAAwBtC,EADF;AAAA,GAAjB,CAAP;AAGD,CAJM,C;;;;;;;;;;;;ACpDA,IAAIF,kCAAa,EAAjB;;AAGA,IAAMd,sBAAO,SAAPA,IAAO,CAACC,OAAD,EAAUkC,QAAV,EAAoBnB,EAApB,EAAwBd,KAAxB,EAAkC;;AAErD,MAAIA,UAAU,OAAd,EAAsB;AACpB,QAAIc,MAAM,CAAV,EAAY;AACZ,WAAK,IAAIZ,IAAI,CAAb,EAAgBA,IAAIsD,WAApB,EAAiCtD,GAAjC,EAAsC;;AAEpCU,mBAAWuC,IAAX,CAAgB,EAAC5C,GAAI0B,SAAS1B,CAAT,IAAc0B,SAASxB,KAAT,GAAiBP,IAAE,GAAjC,CAAL,EAA6CM,GAAGyB,SAASzB,CAAT,GAAa,EAA7D,EAAiEiD,OAAO,IAAI1B,KAAJ,EAAxE,EAAqFqB,YAAYnB,SAASnB,EAA1G,EAAhB;AACD;;AAED,WAAK,IAAIZ,KAAI,CAAb,EAAgBA,KAAIU,WAAWT,MAA/B,EAAuCD,IAAvC,EAA4C;AAC1C,YAAIwD,WAAWC,KAAKC,KAAL,CAAWD,KAAKE,MAAL,KAAiB,CAAjB,GAAsB,CAAjC,CAAf;AACAH,qBAAa,CAAb,GAAiB9C,WAAWV,EAAX,EAAcuD,KAAd,CAAoBzB,GAApB,GAA0B,oCAA3C,GAAkF0B,aAAa,CAAb,GAAiB9C,WAAWV,EAAX,EAAcuD,KAAd,CAAoBzB,GAApB,GAA0B,mCAA3C,GAAiFpB,WAAWV,EAAX,EAAcuD,KAAd,CAAoBzB,GAApB,GAA0B,mCAA7L;AACAjC,gBAAQwC,SAAR,CAAkB3B,WAAWV,EAAX,EAAcuD,KAAhC,EAAsC7C,WAAWV,EAAX,EAAcK,CAApD,EAAsDK,WAAWV,EAAX,EAAcM,CAApE,EAAsE,EAAtE,EAAyE,EAAzE;AACD;AACD,aAAOI,WAAW0C,MAAX,CAAkB;AAAA,eACvBQ,KAAKV,UAAL,KAAoBnB,SAASnB,EADN;AAAA,OAAlB,CAAP;AAID;AAAC;;AAGD,OAAK,IAAIZ,MAAI,CAAb,EAAgBA,MAAIsD,WAApB,EAAiCtD,KAAjC,EAAsC;;AAEpCU,eAAWuC,IAAX,CAAgB,EAAC5C,GAAI0B,SAAS1B,CAAT,IAAc0B,SAASxB,KAAT,GAAiBP,MAAE,GAAjC,CAAL,EAA6CM,GAAGyB,SAASzB,CAAT,GAAa,EAA7D,EAAiEiD,OAAO,IAAI1B,KAAJ,EAAxE,EAAqFqB,YAAYnB,SAASnB,EAA1G,EAAhB;AACD;;AAED,OAAK,IAAIZ,MAAI,CAAb,EAAgBA,MAAIU,WAAWT,MAA/B,EAAuCD,KAAvC,EAA4C;AAC1C,QAAIwD,YAAWC,KAAKC,KAAL,CAAWD,KAAKE,MAAL,KAAiB,CAAjB,GAAsB,CAAjC,CAAf;AACAH,kBAAa,CAAb,GAAiB9C,WAAWV,GAAX,EAAcuD,KAAd,CAAoBzB,GAApB,GAA0B,oCAA3C,GAAkF0B,cAAa,CAAb,GAAiB9C,WAAWV,GAAX,EAAcuD,KAAd,CAAoBzB,GAApB,GAA0B,mCAA3C,GAAiFpB,WAAWV,GAAX,EAAcuD,KAAd,CAAoBzB,GAApB,GAA0B,mCAA7L;AACAjC,YAAQwC,SAAR,CAAkB3B,WAAWV,GAAX,EAAcuD,KAAhC,EAAsC7C,WAAWV,GAAX,EAAcK,CAApD,EAAsDK,WAAWV,GAAX,EAAcM,CAApE,EAAsE,EAAtE,EAAyE,EAAzE;AACD;;AAED,SAAOI,WAAW0C,MAAX,CAAkB;AAAA,WACvBQ,KAAKV,UAAL,KAAoBnB,SAASnB,EADN;AAAA,GAAlB,CAAP;AAID,CApCM;;AAuCA,IAAME,sBAAO,SAAPA,IAAO,CAACjB,OAAD,EAAUkC,QAAV,EAAoBnB,EAApB,EAAwBI,MAAxB,EAAmC;AACrD,OAAK,IAAIhB,IAAI,CAAb,EAAgBA,IAAIU,WAAWT,MAA/B,EAAuCD,GAAvC,EAA4C;AAC1C,QAAG+B,SAASnB,EAAT,KAAgBF,WAAWV,CAAX,EAAckD,UAA9B,IAA4C,CAAClC,OAAO6C,QAAP,CAAgBnD,WAAWV,CAAX,EAAcK,CAA9B,CAAhD,EAAiF;AAAEK,iBAAWV,CAAX,EAAcK,CAAd,GAAkB0B,SAAS1B,CAAT,IAAc0B,SAASxB,KAAT,GAAiBP,IAAE,GAAjC,CAAlB;AACnFH,cAAQwC,SAAR,CAAkB3B,WAAWV,CAAX,EAAcuD,KAAhC,EAAsC7C,WAAWV,CAAX,EAAcK,CAApD,EAAsDK,WAAWV,CAAX,EAAcM,CAApE,EAAsE,EAAtE,EAAyE,EAAzE;AAED,KAHC,MAGK,IAAIyB,SAASnB,EAAT,KAAgBF,WAAWV,CAAX,EAAckD,UAA9B,IAA4ClC,OAAO6C,QAAP,CAAgBnD,WAAWV,CAAX,EAAcK,CAA9B,CAAhD,EAAiF;AACpFK,iBAAWV,CAAX,EAAc8B,GAAd,GAAoB,EAApB;AACApB,iBAAWV,CAAX,EAAcM,CAAd,GAAkB,CAAC,GAAnB;AACH;AAAC;;AAGF,MAAI8C,SAAS1C,WAAW0C,MAAX,CAAkB;AAAA,WAC7BQ,KAAKV,UAAL,KAAoBnB,SAASnB,EADA;AAAA,GAAlB,CAAb;AAGA,SAAOwC,MAAP;AAED,CAhBM;;AAkBA,IAAMzC,4CAAkB,SAAlBA,eAAkB,CAACwC,GAAD,EAAS;AACtC,MAAIA,GAAJ,EAAQ;AACN,YA9DOzC,UA8DP,gBAAaA,WAAW0C,MAAX,CAAkB;AAAA,aAAaU,UAAUZ,UAAV,IAAwBC,GAArC;AAAA,KAAlB,CAAb;AACD,GAFD,MAEO,QA/DEzC,UA+DF,gBAAa,EAAb;AACR,CAJM;;AAMA,IAAM4C,gCAAY,SAAZA,SAAY;AAAA,SACvBG,KAAKC,KAAL,CAAWD,KAAKE,MAAL,MAAiB,IAAI,CAAJ,GAAQ,CAAzB,CAAX,CADuB;AAAA,CAAlB;;AAIA,IAAMlD,oCAAc,SAAdA,WAAc,CAACG,EAAD,EAAQ;AACjC,SAAOF,WAAW0C,MAAX,CAAkB;AAAA,WACvBQ,KAAKV,UAAL,KAAoBtC,EADG;AAAA,GAAlB,CAAP;AAGD,CAJM,C;;;;;;;;;ACzEP;;IAAYmD,O;;AACZ;;IAAYC,Q;;AACZ;;IAAYzE,Q;;AACZ;;IAAYC,S;;;;AAMZyE,SAASC,gBAAT,CAA0B,kBAA1B,EAA8C,YAAM;AAClD,MAAM3B,SAASC,EAAE,QAAF,EAAY,CAAZ,CAAf;AACA,MAAM3C,UAAU0C,OAAOE,UAAP,CAAkB,IAAlB,CAAhB;AACA,MAAMlC,QAAQ,GAAd;AACA,MAAM4D,SAAS,GAAf;;AAEA,MAAIC,WAAJ;AACA,MAAI7C,MAAJ;AACA,MAAI7B,SAAJ;AACA,MAAI2E,gBAAJ;AACA,MAAIC,QAAQ,CAAZ;AACA,MAAIC,QAAQ,EAACC,SAAS,KAAV,EAAiBC,YAAY,KAA7B,EAAZ;AACA,MAAI3E,KAAJ;AACA,MAAI4E,QAAQ,CAAZ;AACD,MAAIC,UAAU,KAAd;AACA,MAAIC,QAAQ,KAAZ;;AAGA,MAAMC,cAAc,SAAdA,WAAc,GAAM;AACzB,QAAIF,YAAY,KAAhB,EAAsB;AACrB9E,cAAQiF,SAAR,CAAkB,CAAlB,EAAoB,CAApB,EAAuBvE,KAAvB,EAA8B4D,MAA9B;AACEtE,cAAQkF,QAAR,2BAA2C,GAA3C,EAAgD,GAAhD;AACF;AAED,GAND;;AAQA,MAAMC,YAAY,SAAZA,SAAY,GAAM;;AAEvBL,cAAU,KAAV;AACA;AACA;AACA;AACA;AACAL,YAAQ,CAAR;;AAEA,QAAIC,QAAQ,EAACC,SAAS,KAAV,EAAiBC,YAAY,KAA7B,EAAZ;AACA3E,YAAQ,IAAR;AACA4E,YAAQ,CAAR;AACAC,cAAU,KAAV;AACA9E,YAAQkF,QAAR,uCAAuD,GAAvD,EAA4D,GAA5D;;AAEA,QAAIH,UAAU,KAAd,EAAoB;AACnB/E,cAAQoF,SAAR;AACApF,cAAQqF,wBAAR,GAAmC,aAAnC;AACArF,cAAQsF,WAAR,GAAsB,CAAtB;AACAvF;AACA;AAED,GAtBD;;AA2BCC,UAAQuF,SAAR,GAAoB,OAApB;AACAvF,UAAQwF,QAAR,CAAiB,CAAjB,EAAmB,CAAnB,EAAqB9E,KAArB,EAA2B4D,MAA3B;AACAtE,UAAQK,WAAR,GAAsB,OAAtB;AACAL,UAAQO,UAAR,CAAmB,CAAnB,EAAsB,CAAtB,EAAyBG,KAAzB,EAAgC4D,MAAhC;;AAEA,MAAImB,cAAc,IAAIzD,KAAJ,EAAlB;AACAyD,cAAYxD,GAAZ,GAAkB,gCAAlB;;AAEA,MAAIyD,iBAAiB,IAAI1D,KAAJ,EAArB;AACA0D,iBAAezD,GAAf,GAAqB,kCAArB;;AAED,MAAM0D,YAAY,SAAZA,SAAY,GAAM;AACvB,QAAIC,aAAa,EAAjB;;AAEA,SAAK,IAAIzF,IAAI,CAAb,EAAgBA,IAAI0E,KAApB,EAA2B1E,GAA3B,EAAgC;AAC/BH,cAAQoF,SAAR;AACApF,cAAQ6F,GAAR,CAAYD,UAAZ,EAAwB,EAAxB,EAA4B,EAA5B,EAAgC,CAAhC,EAAmC,IAAIhC,KAAKkC,EAA5C,EAAgD,KAAhD;AACA9F,cAAQuF,SAAR,GAAoB,SAApB;AACAvF,cAAQ+F,IAAR;AACA/F,cAAQM,SAAR,GAAoB,CAApB;AACAN,cAAQK,WAAR,GAAsB,SAAtB;AACAL,cAAQgG,MAAR;AACAhG,cAAQM,SAAR,GAAoB,CAApB;AACAN,cAAQK,WAAR,GAAsB,OAAtB;AACAL,cAAQgG,MAAR;AACAJ,oBAAc,EAAd;AACA;AACD,SAAK,IAAIzF,IAAI,CAAb,EAAgBA,IAAK,IAAI0E,KAAzB,EAAiC1E,GAAjC,EAAsC;AACrCH,cAAQoF,SAAR;AACApF,cAAQ6F,GAAR,CAAYD,UAAZ,EAAwB,EAAxB,EAA4B,EAA5B,EAAgC,CAAhC,EAAmC,IAAIhC,KAAKkC,EAA5C,EAAgD,KAAhD;AACA9F,cAAQM,SAAR,GAAoB,CAApB;AACAN,cAAQK,WAAR,GAAsB,SAAtB;AACAL,cAAQgG,MAAR;AACAhG,cAAQM,SAAR,GAAoB,CAApB;AACAN,cAAQK,WAAR,GAAsB,OAAtB;AACAL,cAAQgG,MAAR;AACAJ,oBAAc,EAAd;AACA;;AAED5F,YAAQuF,SAAR,GAAoB,OAApB;AAEA,GA9BD;;AAkCC,MAAMxF,OAAO,SAAPA,IAAO,CAACE,KAAD,EAAW;;AAExBD,YAAQiF,SAAR,CAAkB,CAAlB,EAAoB,CAApB,EAAuBvE,KAAvB,EAA8B4D,MAA9B;;AAEA,QAAIO,UAAU,CAAd,EAAgB;AACf7E,cAAQwC,SAAR,CAAkBkD,cAAlB,EAAiC,CAAjC,EAAoC,CAApC,EAAuChF,KAAvC,EAA+C4D,MAA/C;AACAzE,kBAAYsE,SAAS1C,cAAT,EAAZ;AACA5B,kBAAYsE,SAASpE,IAAT,CAAcC,OAAd,EAAuBC,KAAvB,CAAZ;AACAyB,eAASwC,QAAQnE,IAAR,CAAaC,OAAb,CAAT;AACAuE,oBAAc0B,YAAYhF,IAAZ,EAAkB,OAAK,EAAvB,CAAd;AACA;AACA;;AAEC,QAAI4D,QAAQ,CAAZ,EAAc;AACZ7E,cAAQwC,SAAR,CAAkBkD,cAAlB,EAAiC,CAAjC,EAAoC,CAApC,EAAuChF,KAAvC,EAA+C4D,MAA/C;AACH5C,eAASwC,QAAQnE,IAAR,CAAaC,OAAb,CAAT;AACAH,kBAAYsE,SAASpE,IAAT,CAAcC,OAAd,EAAuBC,KAAvB,CAAZ;AACGsE,oBAAc0B,YAAYhF,IAAZ,EAAkB,OAAK,EAAvB,CAAd;AACD,KALD,MAKO;AACRiF,cAAQC,GAAR,CAAY,KAAZ;AACE;AAEF,GAtBD;;AAwBA,MAAMC,aAAa,SAAbA,UAAa,CAACC,KAAD,EAAW;AAC9B,QAAIA,KAAJ,EAAU;AACP,WAAK,IAAIlG,IAAI,CAAb,EAAgBA,IAAIkG,MAAMjG,MAA1B,EAAkCD,GAAlC,EAAuC;AACrC,YAAKuB,OAAOlB,CAAP,GAAW,EAAX,GAAgB6F,MAAMlG,CAAN,EAASK,CAA1B,IAAiCkB,OAAOlB,CAAP,GAAW6F,MAAMlG,CAAN,EAASK,CAAT,GAAa,GAAzD,IAAkEkB,OAAOjB,CAAP,GAAW4F,MAAMlG,CAAN,EAASM,CAA1F,EAA+F,OAAO,IAAP;AAChG;AACJ;AACE,WAAO,KAAP;AACD,GAPD;;AASA,MAAMQ,OAAO,SAAPA,IAAO,GAAM;AACjBjB,YAAQiF,SAAR,CAAkB,CAAlB,EAAoB,CAApB,EAAuBvE,KAAvB,EAA8B4D,MAA9B;AACAtE,YAAQwC,SAAR,CAAkBkD,cAAlB,EAAkC,CAAlC,EAAsC,CAAtC,EAAyChF,KAAzC,EAAgD4D,MAAhD;;AAEFqB;AACE3F,YAAQwC,SAAR,CAAkBiD,WAAlB,EAA8B,GAA9B,EAAkC,EAAlC,EAAqC,EAArC,EAAwC,EAAxC;;AAIA,QAAIa,wBAAJ;;AAEA,QAAIF,WAAWvG,SAAX,CAAJ,EAA2B;AACzB,UAAI0G,WAAJ;AACA,WAAK,IAAIpG,IAAI,CAAb,EAAgBA,IAAIN,UAAUO,MAA9B,EAAsCD,GAAtC,EAA2C;AACzC,YAAKuB,OAAOlB,CAAP,GAAW,EAAX,GAAeX,UAAUM,CAAV,EAAaK,CAA7B,IAAoCkB,OAAOlB,CAAP,GAAWX,UAAUM,CAAV,EAAaK,CAAb,IAAkBX,UAAUM,CAAV,EAAaO,KAAb,GAAqB,EAAvC,CAA/C,IAA8FgB,OAAOjB,CAAP,IAAYZ,UAAUM,CAAV,EAAaM,CAAb,GAAiB,EAA/H,EAAkI;AAC/H,cAAI,CAAC8F,EAAD,IAAO1G,UAAUM,CAAV,EAAaM,CAAb,GAAiB8F,GAAG9F,CAA/B,EAAiC;AAC/B8F,iBAAK1G,UAAUM,CAAV,CAAL;AACD;AACH;AACF;AACD,UAAIoG,EAAJ,EAAO;AACLD,0BAAkBC,EAAlB;AACD;AACF;;AAMD,QAAID,eAAJ,EAAoB;AAClB9B,yBAAmB8B,eAAnB;AACD;;AAGD,QAAIA,mBAAmB5E,OAAOzB,KAAP,KAAiB,OAAxC,EAAgD;AAC9CyB,eAASwC,QAAQjD,IAAR,CAAaqF,eAAb,CAAT;AACAzG,kBAAYsE,SAASlD,IAAT,CAAcjB,OAAd,CAAZ;AACD,KAHD,MAIK,IAAIsG,eAAJ,EAAqB;AACxBzG,kBAAYsE,SAASlD,IAAT,CAAcjB,OAAd,CAAZ;AACA0B,eAASwC,QAAQjD,IAAR,CAAaqF,eAAb,CAAT;AACD,KAHI,MAIA,IAAI,CAACA,eAAD,IAAoB5E,OAAOC,OAAP,KAAmB,IAA3C,EAAgD;AACnDD,eAASwC,QAAQjD,IAAR,CAAauD,gBAAb,CAAT;AACA3E,kBAAYsE,SAASlD,IAAT,CAAcjB,OAAd,CAAZ;AACD,KAHI,MAIA,IAAI,CAACsG,eAAL,EAAqB;AACxBrG,cAAQ,SAAR;AACAyB,eAASwC,QAAQjD,IAAR,CAAauD,gBAAb,EAA+B,SAA/B,CAAT;AACA3E,kBAAYsE,SAASlD,IAAT,CAAcjB,OAAd,CAAZ;AACD;;AAED;;AAEA,QAAI0B,OAAOjB,CAAP,KAAa,GAAjB,EAAqB;AACnB+F,oBAAcjC,WAAd;AACA7C,eAASwC,QAAQ3B,YAAR,EAAT;AACAsC,eAAQ,CAAR;AACH,UAAIA,QAAQ,CAAZ,EAAe;AACd9E,aAAK,SAAL;AACA,OAFD,MAEO;AACNgF,gBAAQ,IAAR;AACAI;AACA;AACC;;AAID,SAAK,IAAIhF,IAAI,CAAb,EAAgBA,IAAIN,UAAUO,MAA9B,EAAsCD,GAAtC,EAA2C;AAC3C,UAAIN,UAAUM,CAAV,EAAaQ,SAAjB,EAA4B;AACxB,YAAKyF,WAAWvG,SAAX,KAA0B6B,OAAOlB,CAAP,GAAWX,UAAUM,CAAV,EAAaQ,SAAb,CAAuBH,CAAvB,GAA2B,EAAtC,IAA4CkB,OAAOlB,CAAP,GAAWX,UAAUM,CAAV,EAAaQ,SAAb,CAAuBH,CAAvB,GAA0B,EAA3G,IAAkHkB,OAAOjB,CAAP,GAAWZ,UAAUM,CAAV,EAAaQ,SAAb,CAAuBF,CAAvB,GAA2B,EAAxJ,IAA8JiB,OAAOjB,CAAP,GAAWZ,UAAUM,CAAV,EAAaQ,SAAb,CAAuBF,CAAvB,GAA2B,EAAzM,EAA4M;;AAE1MyF,kBAAQC,GAAR,CAAY,UAAZ;AACAK,wBAAcjC,WAAd;AACA7C,mBAASwC,QAAQ3B,YAAR,EAAT;AACJsC,mBAAS,CAAT;;AAGA,cAAIA,QAAQ,CAAZ,EAAe;AACd9E,iBAAK,SAAL;AACA,WAFD,MAGA;AACCgF,oBAAQ,IAAR;AACAI;AACA;AAEC,SAhBA,MAgBM,IAAIsB,MAAM5G,UAAUM,CAAV,CAAN,MAAwB,KAA5B,EAAmC;AAC3C,cAAIuG,cAAcD,MAAM5G,UAAUM,CAAV,CAAN,CAAlB;AACAN,oBAAUM,CAAV,EAAagB,MAAb,CAAoBiC,IAApB,CAAyBsD,YAAYlG,CAArC;AACAiE,mBAAS,CAAT;AACD;AAGD;AACD;;AAID;AACAzE,YAAQ2G,IAAR,GAAuB,qBAAvB;AACE3G,YAAQkF,QAAR,aAA2BT,KAA3B,EAAoC,EAApC,EAAwC,EAAxC;;AAEA,QAAI6B,oBAAoBzG,UAAUA,UAAUO,MAAV,GAAmB,CAA7B,CAAxB,EAAyD;AACvDoG,oBAAcjC,WAAd;AACH1E,kBAAYsE,SAAS/C,iBAAT,CAA2BpB,OAA3B,CAAZ;AACGuE,oBAAc0B,YAAYhF,IAAZ,EAAkB,OAAK,EAAvB,CAAd;AAED;AACF,GA5GD;;AA+GA,MAAM2F,cAAc,SAAdA,WAAc,GAAM;AACxB,QAAIlC,MAAMC,OAAN,KAAkB,IAAlB,IAA0BD,MAAME,UAAN,KAAqB,KAAnD,EAAyD;AACvD4B,oBAAcjC,WAAd;AACAG,YAAME,UAAN,GAAmB,IAAnB;AACAF,YAAMC,OAAN,GAAgB,KAAhB;AACD,KAJD,MAIO,IAAID,MAAMC,OAAN,KAAkB,IAAlB,IAA0BD,MAAME,UAAN,KAAqB,IAAnD,EAAwD;;AAE7DL,oBAAc0B,YAAYhF,IAAZ,EAAkB,OAAK,EAAvB,CAAd;AACAyD,YAAMC,OAAN,GAAgB,KAAhB;AACAD,YAAME,UAAN,GAAmB,KAAnB;AACD;AACF,GAXD;;AAcA,MAAMiC,cAAc,SAAdA,WAAc,CAAC9D,CAAD,EAAO;AACzB,QAAI+D,gBAAgB/D,EAAEgE,OAAF,GAAYhE,EAAEiE,MAAF,CAASC,UAAzC;AACA,QAAIC,cAAcnE,EAAEoE,OAAF,GAAYpE,EAAEiE,MAAF,CAASI,SAAvC;;AAEA,QAAKN,iBAAiB,GAAjB,IAAwBA,iBAAiB,GAA1C,IAAmDI,eAAe,EAAf,IAAqBA,eAAe,EAA3F,EAA+F;AAC7FxC,YAAMC,OAAN,GAAgB,IAAhB;AACAiC;AACD;AACF,GARD;;AAUA,MAAMH,QAAQ,SAARA,KAAQ,CAACvE,QAAD,EAAc;AAC1B,QAAImF,QAAQnF,SAASrB,UAArB;AACA,SAAK,IAAIyG,IAAI,CAAb,EAAgBA,IAAID,MAAMjH,MAA1B,EAAkCkH,GAAlC,EAAuC;AACpC,UAAI5F,OAAOlB,CAAP,KAAa6G,MAAMC,CAAN,EAAS9G,CAAT,GAAa,EAA1B,IAAgCkB,OAAOjB,CAAP,GAAW4G,MAAMC,CAAN,EAAS7G,CAAT,GAAa,EAAxD,IAA8D2F,WAAWvG,SAAX,CAA9D,IAAuF6B,OAAOjB,CAAP,GAAW4G,MAAMC,CAAN,EAAS7G,CAA/G,EAAiH;AAC/G,eAAO4G,MAAMC,CAAN,CAAP;AACD;AACH;AACD,WAAO,KAAP;AACD,GARD;;AAWDtC;;AAGCrC,IAAEE,MAAF,EAAUC,QAAV,CAAmB,UAACC,CAAD,EAAO;;AAE1B,QAAG+B,YAAY,KAAZ,IAAqBC,UAAU,KAAlC,EAAwC;AACvCD,gBAAU,IAAV;AACA/E;AACA,KAHD,MAGO,IAAG+E,YAAY,KAAZ,IAAqBC,UAAU,IAAlC,EAAuC;AAC7CA,cAAQ,KAAR;AACA;AACC,QAAIhC,EAAEC,OAAF,KAAc,GAAlB,EAAuB;AACtB0B,YAAMC,OAAN,GAAgB,IAAhB;AACAuB,cAAQC,GAAR,CAAY,aAAZ;AACAS;AACD;AACF,GAbA;;AAeDjE,IAAEE,MAAF,EAAU0E,KAAV,CAAgB,aAAK;AACnBV,gBAAY9D,CAAZ;AACD,GAFD;AAGA,CA1SD,E;;;;;;;;;;;;ACRO,IAAMjD,8CAAmB,SAAnBA,gBAAmB;AAAA,SAAO,CACrC,EAACU,GAAG,GAAJ,EAASC,GAAG,GAAZ,EAAiBS,OAAO,CAAxB,EAA2BP,WAAW,IAAtC,EAA4CE,YAAY,IAAxD,EAA8DM,QAAQ,EAAtE,EAA0ET,OAAO,GAAjF,EAAsFK,IAAI,CAA1F,EADqC,EAErC,EAACP,GAAG,IAAJ,EAAUC,GAAG,GAAb,EAAkBS,OAAO,CAAzB,EAA4BP,WAAW,IAAvC,EAA6CE,YAAY,IAAzD,EAA+DM,QAAQ,EAAvE,EAA2ET,OAAO,GAAlF,EAAuFK,IAAI,CAA3F,EAFqC,EAGrC,EAACP,GAAG,IAAJ,EAAUC,GAAG,GAAb,EAAkBS,OAAO,CAAzB,EAA4BP,WAAW,IAAvC,EAA6CE,YAAY,IAAzD,EAA+DM,QAAQ,EAAvE,EAA2ET,OAAO,GAAlF,EAAuFK,IAAI,CAA3F,EAHqC,EAIrC,EAACP,GAAG,IAAJ,EAAUC,GAAG,GAAb,EAAkBS,OAAO,CAAzB,EAA4BP,WAAW,IAAvC,EAA6CE,YAAY,IAAzD,EAA+DM,QAAQ,EAAvE,EAA2ET,OAAO,GAAlF,EAAuFK,IAAI,CAA3F,EAJqC,CAAP;AAAA,CAAzB;;AAOP;;AAEO,IAAMS,gDAAoB,SAApBA,iBAAoB,CAACH,SAAD,EAAYN,EAAZ,EAAmB;;AAEpD,MAAIlB,YAAY,CACd,CACA,EAACW,GAAIa,YAAY,EAAjB,EAAsBZ,GAAG,GAAzB,EAA8BS,OAAO,CAArC,EAAwCP,WAAW,IAAnD,EAAyDE,YAAY,IAArE,EAA2EM,QAAQ,EAAnF,EAAuFT,OAAO8G,gBAA9F,EAAgHzG,IAAIA,KAAG,CAAvH,EADA,EAEA,EAACP,GAAIa,YAAY,GAAjB,EAAuBZ,GAAG,GAA1B,EAA+BS,OAAO,CAAtC,EAAyCP,WAAW,IAApD,EAA0DE,YAAY,IAAtE,EAA4EM,QAAQ,EAApF,EAAwFT,OAAO8G,gBAA/F,EAAiHzG,IAAIA,KAAG,CAAxH,EAFA,EAGA,EAACP,GAAIa,YAAY,GAAjB,EAAuBZ,GAAG,GAA1B,EAA+BS,OAAO,CAAtC,EAAyCP,WAAW,IAApD,EAA0DE,YAAY,IAAtE,EAA4EM,QAAQ,EAApF,EAAwFT,OAAO8G,gBAA/F,EAAiHzG,IAAIA,KAAG,CAAxH,EAHA,EAIA,EAACP,GAAIa,YAAY,IAAjB,EAAwBZ,GAAG,GAA3B,EAAgCS,OAAO,CAAvC,EAA0CP,WAAW,IAArD,EAA2DE,YAAY,IAAvE,EAA6EM,QAAQ,EAArF,EAAyFT,OAAO8G,gBAAhG,EAAkHzG,IAAIA,KAAG,CAAzH,EAJA,CADc,EAMZ,CACF,EAACP,GAAIa,YAAY,EAAjB,EAAsBZ,GAAG,GAAzB,EAA8BS,OAAO,CAArC,EAAwCP,WAAW,IAAnD,EAAyDE,YAAY,IAArE,EAA2EM,QAAQ,EAAnF,EAAuFT,OAAO8G,gBAA9F,EAAgHzG,IAAIA,KAAG,CAAvH,EADE,EAEF,EAACP,GAAIa,YAAY,GAAjB,EAAuBZ,GAAG,GAA1B,EAA+BS,OAAO,CAAtC,EAAyCP,WAAW,IAApD,EAA0DE,YAAY,IAAtE,EAA4EM,QAAQ,EAApF,EAAwFT,OAAO8G,gBAA/F,EAAiHzG,IAAIA,KAAG,CAAxH,EAFE,EAGF,EAACP,GAAIa,YAAY,IAAjB,EAAwBZ,GAAG,GAA3B,EAAgCS,OAAO,CAAvC,EAA0CP,WAAW,IAArD,EAA2DE,YAAY,IAAvE,EAA6EM,QAAQ,EAArF,EAAyFT,OAAO8G,gBAAhG,EAAkHzG,IAAIA,KAAG,CAAzH,EAHE,EAIF,EAACP,GAAIa,YAAY,IAAjB,EAAwBZ,GAAG,GAA3B,EAAgCS,OAAO,CAAvC,EAA0CP,WAAW,IAArD,EAA2DE,YAAY,IAAvE,EAA6EM,QAAQ,EAArF,EAAyFT,OAAO8G,gBAAhG,EAAkHzG,IAAIA,KAAG,CAAzH,EAJE,CANY,CAAhB;;AAeA,SAAOlB,UAAU+D,KAAKC,KAAL,CAAWD,KAAKE,MAAL,KAAcjE,UAAUO,MAAnC,CAAV,EAAsDqH,KAAtD,CAA4D,CAA5D,CAAP;AAEC,CAnBM;;AAqBA,IAAMD,0CAAiB,SAAjBA,cAAiB;AAAA,SAC5B5D,KAAKC,KAAL,CAAWD,KAAKE,MAAL,MAAiB,MAAM,GAAN,GAAY,CAA7B,CAAX,IAA8C,GADlB;AAAA,CAAvB,C","file":"./lib/bundle.js","sourcesContent":[" \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// identity function for calling harmony imports with the correct context\n \t__webpack_require__.i = function(value) { return value; };\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, {\n \t\t\t\tconfigurable: false,\n \t\t\t\tenumerable: true,\n \t\t\t\tget: getter\n \t\t\t});\n \t\t}\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = 20);\n\n\n\n// WEBPACK FOOTER //\n// webpack/bootstrap ad5c3f32994152146669","// Collection of math functions\n//\n// 1. Combine components together\n// 2. Has async init to load wasm modules\n//\n'use strict';\n\n\nconst base64decode     = require('./utils').base64decode;\nconst math_wasm_base64 = require('./mathlib/wasm/math_wasm_base64');\n\n\nfunction MathLib(requested_features, preload) {\n  this.__requested_features = requested_features || [];\n  this.__initialized = false;\n  this.__initCallbacks = [];\n  this.__wasm_module = preload && preload.wasm_module ? preload : null;\n\n  // List of supported features, according to options & browser/node.js\n  this.features = {\n    js:   false, // pure JS implementation, can be disabled for testing\n    wasm: false  // webassembly implementation for heavy functions\n  };\n}\n\n\nMathLib.prototype.__init__ = function __init__(callback) {\n  if (this.__initCallbacks.length > 0) {\n    this.__initCallbacks.push(callback);\n    return;\n  }\n\n  this.__initCallbacks = [ callback ];\n\n  let finish = () => {\n    let callbacks = this.__initCallbacks;\n    this.__initCallbacks = [];\n    this.__initialized = true;\n    callbacks.forEach(fn => fn());\n  };\n\n  // Map supported implementations\n  this.unsharp = this.unsharp_js; // That's in JS only for a while\n\n  if (this.__requested_features.indexOf('js') >= 0) {\n    this.features.js = true;\n    this.resize  = this.resize_js;\n  }\n\n  if ((typeof WebAssembly !== 'undefined') &&\n      (this.__requested_features.indexOf('wasm') >= 0)) {\n\n    if (this.__wasm_module) {\n      this.features.wasm = true;\n      this.resize  = this.resize_wasm;\n      finish();\n      return;\n    }\n\n    WebAssembly.compile(base64decode(math_wasm_base64))\n      .then(wasm_module => {\n        this.__wasm_module = wasm_module;\n        this.features.wasm = true;\n        this.resize  = this.resize_wasm;\n        finish();\n      })\n      .catch(() => {\n        // Suppress init errors\n        finish();\n      });\n\n    return;\n  }\n\n  finish();\n};\n\n\n// Returns either promise or callback; callback interface is intended only for\n// WebWorkers in IE11 (which doesn't support promises).\n//\n/* eslint-disable consistent-return */\nMathLib.prototype.init = function init(callback) {\n  if (typeof callback !== 'function') {\n    if (this.__initialized) return Promise.resolve(this);\n\n    return new Promise((resolve, reject) => {\n      this.__init__(err => {\n        if (err) {\n          reject(err);\n          return;\n        }\n\n        if (!this.features.wasm && !this.features.js) {\n          reject(new Error('Pica mathlib: no supported methods found'));\n          return;\n        }\n\n        resolve(this);\n      });\n    });\n  }\n\n  if (this.__initialized) {\n    callback(null, this);\n    return;\n  }\n\n  this.__init__(err => {\n    if (err) {\n      callback(err);\n      return;\n    }\n\n    if (!this.features.wasm && !this.features.js) {\n      callback(new Error('Pica mathlib: no supported methods found'));\n      return;\n    }\n\n    callback(null, this);\n  });\n\n  return;\n};\n\n\nMathLib.prototype.resizeAndUnsharp = function resizeAndUnsharp(options, cache) {\n  let result = this.resize(options, cache);\n\n  if (options.unsharpAmount) {\n    this.unsharp(\n      result,\n      options.toWidth,\n      options.toHeight,\n      options.unsharpAmount,\n      options.unsharpRadius,\n      options.unsharpThreshold\n    );\n  }\n\n  return result;\n};\n\n\n// Pin implementations\nMathLib.prototype.unsharp_js = require('./mathlib/unsharp_js');\nMathLib.prototype.resize_js  = require('./mathlib/resize_js');\n\n\n////////////////////////////////////////////////////////////////////////////////\n// WebAssembly wrappers & helpers\n//\n\nconst createFilters = require('./mathlib/resize_filter_gen');\n\nfunction resetAlpha(dst, width, height) {\n  let ptr = 3, len = (width * height * 4)|0;\n  while (ptr < len) { dst[ptr] = 0xFF; ptr = (ptr + 4)|0; }\n}\n\nfunction asUint8Array(src) {\n  return new Uint8Array(src.buffer, 0, src.byteLength);\n}\n\n\n\nlet IS_LE = true;\n// should not crash everything on module load in old browsers\ntry {\n  IS_LE = ((new Uint32Array((new Uint8Array([ 1, 0, 0, 0 ])).buffer))[0] === 1);\n} catch (__) {}\n\n\nfunction copyInt16asLE(src, target, target_offset) {\n  if (IS_LE) {\n    target.set(asUint8Array(src), target_offset);\n    return;\n  }\n\n  for (let ptr = target_offset, i = 0; i < src.length; i++) {\n    let data = src[i];\n    target[ptr++] = data & 0xFF;\n    target[ptr++] = (data >> 8) & 0xFF;\n  }\n}\n\n\nMathLib.prototype.resize_wasm = function resize_wasm(options, cache) {\n  const src     = options.src;\n  const srcW    = options.width;\n  const srcH    = options.height;\n  const destW   = options.toWidth;\n  const destH   = options.toHeight;\n  const scaleX  = options.scaleX || options.toWidth / options.width;\n  const scaleY  = options.scaleY || options.toHeight / options.height;\n  const offsetX = options.offsetX || 0.0;\n  const offsetY = options.offsetY || 0.0;\n  const dest    = options.dest || new Uint8Array(destW * destH * 4);\n  const quality = typeof options.quality === 'undefined' ? 3 : options.quality;\n  const alpha   = options.alpha || false;\n\n  if (!cache) cache = {};\n\n  const fx_key = `filter_${quality}|${srcW}|${destW}|${scaleX}|${offsetX}`;\n  const fy_key = `filter_${quality}|${srcH}|${destH}|${scaleY}|${offsetY}`;\n\n  const filtersX = cache[fx_key] || createFilters(quality, srcW, destW, scaleX, offsetX),\n        filtersY = cache[fy_key] || createFilters(quality, srcH, destH, scaleY, offsetY);\n\n  //if (!cache[fx_key]) cache[fx_key] = filtersX;\n  //if (!cache[fy_key]) cache[fy_key] = filtersY;\n\n  const alloc_bytes = Math.max(src.byteLength, dest.byteLength) +\n                    filtersX.byteLength +\n                    filtersY.byteLength +\n                    srcH * destW * 4; // Buffer between convolve passes\n\n  const alloc_pages = Math.ceil(alloc_bytes / (64 * 1024));\n\n  const wasm_imports = cache.wasm_imports || {\n    env: {\n      memory: new WebAssembly.Memory({ initial: alloc_pages })\n      // emsdk requires more import vars\n      /*memoryBase: 0,\n      tableBase:  0,\n      memory: new WebAssembly.Memory({\n        // Compiled wasm has 256 min memory value limit.\n        // Atempt to provide less memory size will cause linking error\n        initial: Math.max(256, alloc_pages)\n      }),\n      table: new WebAssembly.Table({\n        initial:100,\n        element: 'anyfunc'\n      })*/\n    }\n  };\n\n  // Increase memory size if needed\n  const memory    = wasm_imports.env.memory,\n        mem_pages = memory.buffer.byteLength / (64 * 1024);\n\n  if (alloc_pages > mem_pages) {\n    // increase to delta + 1MB\n    memory.grow(alloc_pages - mem_pages + 16);\n  }\n\n  const wasm_instance = cache.wasm_instance || new WebAssembly.Instance(this.__wasm_module, wasm_imports);\n\n  if (!cache.wasm_imports)  cache.wasm_imports  = wasm_imports;\n  if (!cache.wasm_instance) cache.wasm_instance = wasm_instance;\n\n  //\n  // Fill memory block with data to process\n  //\n\n  const mem   = new Uint8Array(wasm_imports.env.memory.buffer);\n  const mem32 = new Uint32Array(wasm_imports.env.memory.buffer);\n\n  // mem.set(src)\n  // 32-bit copy is much faster in chrome\n  const src32 = new Uint32Array(src.buffer);\n  mem32.set(src32);\n\n  // Place tmp buffer after src to have 4x byte align.\n  // That doesn't seems to make sence but costs nothing.\n  const tmp_offset = Math.max(src.byteLength, dest.byteLength);\n\n  const filtersX_offset = tmp_offset + srcH * destW * 4;\n  const filtersY_offset = filtersX_offset + filtersX.byteLength;\n\n  // We should guarantee LE bytes order. Filters are not big, so\n  // speed difference is not significant vs direct .set()\n  copyInt16asLE(filtersX, mem, filtersX_offset);\n  copyInt16asLE(filtersY, mem, filtersY_offset);\n\n  //\n  // Now call webassembly method\n  //\n\n  wasm_instance.exports.convolveHV(\n  // emsdk does method names with '_'\n  //wasm_instance.exports._convolveHV(\n    filtersX_offset,\n    filtersY_offset,\n    tmp_offset,\n    srcW, srcH, destW, destH\n  );\n\n  //\n  // Copy data back to typed array\n  //\n\n  // 32-bit copy is much faster in chrome\n  const dest32 = new Uint32Array(dest.buffer);\n  dest32.set(mem32.subarray(0, dest32.length));\n\n  // That's faster than doing checks in convolver.\n  // !!! Note, canvas data is not premultipled. We don't need other\n  // alpha corrections.\n\n  if (!alpha) resetAlpha(dest, destW, destH);\n\n  return dest;\n};\n\n\nmodule.exports = MathLib;\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./~/pica/lib/mathlib.js\n// module id = 0\n// module chunks = 0","// Resize convolvers, pure JS implementation\n//\n'use strict';\n\n\n// Precision of fixed FP values\n//var FIXED_FRAC_BITS = 14;\n\n\nfunction clampTo8(i) { return i < 0 ? 0 : (i > 255 ? 255 : i); }\n\n\n// Convolve image in horizontal directions and transpose output. In theory,\n// transpose allow:\n//\n// - use the same convolver for both passes (this fails due different\n//   types of input array and temporary buffer)\n// - making vertical pass by horisonltal lines inprove CPU cache use.\n//\n// But in real life this doesn't work :)\n//\nfunction convolveHorizontally(src, dest, srcW, srcH, destW, filters) {\n\n  var r, g, b, a;\n  var filterPtr, filterShift, filterSize;\n  var srcPtr, srcY, destX, filterVal;\n  var srcOffset = 0, destOffset = 0;\n\n  // For each row\n  for (srcY = 0; srcY < srcH; srcY++) {\n    filterPtr  = 0;\n\n    // Apply precomputed filters to each destination row point\n    for (destX = 0; destX < destW; destX++) {\n      // Get the filter that determines the current output pixel.\n      filterShift = filters[filterPtr++];\n      filterSize  = filters[filterPtr++];\n\n      srcPtr = (srcOffset + (filterShift * 4))|0;\n\n      r = g = b = a = 0;\n\n      // Apply the filter to the row to get the destination pixel r, g, b, a\n      for (; filterSize > 0; filterSize--) {\n        filterVal = filters[filterPtr++];\n\n        // Use reverse order to workaround deopts in old v8 (node v.10)\n        // Big thanks to @mraleph (Vyacheslav Egorov) for the tip.\n        a = (a + filterVal * src[srcPtr + 3])|0;\n        b = (b + filterVal * src[srcPtr + 2])|0;\n        g = (g + filterVal * src[srcPtr + 1])|0;\n        r = (r + filterVal * src[srcPtr])|0;\n        srcPtr = (srcPtr + 4)|0;\n      }\n\n      // Bring this value back in range. All of the filter scaling factors\n      // are in fixed point with FIXED_FRAC_BITS bits of fractional part.\n      //\n      // (!) Add 1/2 of value before clamping to get proper rounding. In other\n      // case brightness loss will be noticeable if you resize image with white\n      // border and place it on white background.\n      //\n      dest[destOffset + 3] = clampTo8((a + (1 << 13)) >> 14/*FIXED_FRAC_BITS*/);\n      dest[destOffset + 2] = clampTo8((b + (1 << 13)) >> 14/*FIXED_FRAC_BITS*/);\n      dest[destOffset + 1] = clampTo8((g + (1 << 13)) >> 14/*FIXED_FRAC_BITS*/);\n      dest[destOffset]     = clampTo8((r + (1 << 13)) >> 14/*FIXED_FRAC_BITS*/);\n      destOffset = (destOffset + srcH * 4)|0;\n    }\n\n    destOffset = ((srcY + 1) * 4)|0;\n    srcOffset  = ((srcY + 1) * srcW * 4)|0;\n  }\n}\n\n// Technically, convolvers are the same. But input array and temporary\n// buffer can be of different type (especially, in old browsers). So,\n// keep code in separate functions to avoid deoptimizations & speed loss.\n\nfunction convolveVertically(src, dest, srcW, srcH, destW, filters) {\n\n  var r, g, b, a;\n  var filterPtr, filterShift, filterSize;\n  var srcPtr, srcY, destX, filterVal;\n  var srcOffset = 0, destOffset = 0;\n\n  // For each row\n  for (srcY = 0; srcY < srcH; srcY++) {\n    filterPtr  = 0;\n\n    // Apply precomputed filters to each destination row point\n    for (destX = 0; destX < destW; destX++) {\n      // Get the filter that determines the current output pixel.\n      filterShift = filters[filterPtr++];\n      filterSize  = filters[filterPtr++];\n\n      srcPtr = (srcOffset + (filterShift * 4))|0;\n\n      r = g = b = a = 0;\n\n      // Apply the filter to the row to get the destination pixel r, g, b, a\n      for (; filterSize > 0; filterSize--) {\n        filterVal = filters[filterPtr++];\n\n        // Use reverse order to workaround deopts in old v8 (node v.10)\n        // Big thanks to @mraleph (Vyacheslav Egorov) for the tip.\n        a = (a + filterVal * src[srcPtr + 3])|0;\n        b = (b + filterVal * src[srcPtr + 2])|0;\n        g = (g + filterVal * src[srcPtr + 1])|0;\n        r = (r + filterVal * src[srcPtr])|0;\n        srcPtr = (srcPtr + 4)|0;\n      }\n\n      // Bring this value back in range. All of the filter scaling factors\n      // are in fixed point with FIXED_FRAC_BITS bits of fractional part.\n      //\n      // (!) Add 1/2 of value before clamping to get proper rounding. In other\n      // case brightness loss will be noticeable if you resize image with white\n      // border and place it on white background.\n      //\n      dest[destOffset + 3] = clampTo8((a + (1 << 13)) >> 14/*FIXED_FRAC_BITS*/);\n      dest[destOffset + 2] = clampTo8((b + (1 << 13)) >> 14/*FIXED_FRAC_BITS*/);\n      dest[destOffset + 1] = clampTo8((g + (1 << 13)) >> 14/*FIXED_FRAC_BITS*/);\n      dest[destOffset]     = clampTo8((r + (1 << 13)) >> 14/*FIXED_FRAC_BITS*/);\n      destOffset = (destOffset + srcH * 4)|0;\n    }\n\n    destOffset = ((srcY + 1) * 4)|0;\n    srcOffset  = ((srcY + 1) * srcW * 4)|0;\n  }\n}\n\n\nmodule.exports = {\n  convolveHorizontally,\n  convolveVertically\n};\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./~/pica/lib/mathlib/resize_convolve_js.js\n// module id = 1\n// module chunks = 0","// Calculate convolution filters for each destination point,\n// and pack data to Int16Array:\n//\n// [ shift, length, data..., shift2, length2, data..., ... ]\n//\n// - shift - offset in src image\n// - length - filter length (in src points)\n// - data - filter values sequence\n//\n'use strict';\n\n\nvar FILTER_INFO = require('./resize_filter_info');\n\n// Precision of fixed FP values\nvar FIXED_FRAC_BITS = 14;\n\n\nfunction toFixedPoint(num) {\n  return Math.round(num * ((1 << FIXED_FRAC_BITS) - 1));\n}\n\n\nmodule.exports = function resizeFilterGen(quality, srcSize, destSize, scale, offset) {\n\n  var filterFunction = FILTER_INFO[quality].filter;\n\n  var scaleInverted = 1.0 / scale;\n  var scaleClamped  = Math.min(1.0, scale); // For upscale\n\n  // Filter window (averaging interval), scaled to src image\n  var srcWindow = FILTER_INFO[quality].win / scaleClamped;\n\n  var destPixel, srcPixel, srcFirst, srcLast, filterElementSize,\n      floatFilter, fxpFilter, total, pxl, idx, floatVal, filterTotal, filterVal;\n  var leftNotEmpty, rightNotEmpty, filterShift, filterSize;\n\n  var maxFilterElementSize = Math.floor((srcWindow + 1) * 2);\n  var packedFilter    = new Int16Array((maxFilterElementSize + 2) * destSize);\n  var packedFilterPtr = 0;\n\n  var slowCopy = !packedFilter.subarray || !packedFilter.set;\n\n  // For each destination pixel calculate source range and built filter values\n  for (destPixel = 0; destPixel < destSize; destPixel++) {\n\n    // Scaling should be done relative to central pixel point\n    srcPixel = (destPixel + 0.5) * scaleInverted + offset;\n\n    srcFirst = Math.max(0, Math.floor(srcPixel - srcWindow));\n    srcLast  = Math.min(srcSize - 1, Math.ceil(srcPixel + srcWindow));\n\n    filterElementSize = srcLast - srcFirst + 1;\n    floatFilter = new Float32Array(filterElementSize);\n    fxpFilter = new Int16Array(filterElementSize);\n\n    total = 0.0;\n\n    // Fill filter values for calculated range\n    for (pxl = srcFirst, idx = 0; pxl <= srcLast; pxl++, idx++) {\n      floatVal = filterFunction(((pxl + 0.5) - srcPixel) * scaleClamped);\n      total += floatVal;\n      floatFilter[idx] = floatVal;\n    }\n\n    // Normalize filter, convert to fixed point and accumulate conversion error\n    filterTotal = 0;\n\n    for (idx = 0; idx < floatFilter.length; idx++) {\n      filterVal = floatFilter[idx] / total;\n      filterTotal += filterVal;\n      fxpFilter[idx] = toFixedPoint(filterVal);\n    }\n\n    // Compensate normalization error, to minimize brightness drift\n    fxpFilter[destSize >> 1] += toFixedPoint(1.0 - filterTotal);\n\n    //\n    // Now pack filter to useable form\n    //\n    // 1. Trim heading and tailing zero values, and compensate shitf/length\n    // 2. Put all to single array in this format:\n    //\n    //    [ pos shift, data length, value1, value2, value3, ... ]\n    //\n\n    leftNotEmpty = 0;\n    while (leftNotEmpty < fxpFilter.length && fxpFilter[leftNotEmpty] === 0) {\n      leftNotEmpty++;\n    }\n\n    if (leftNotEmpty < fxpFilter.length) {\n      rightNotEmpty = fxpFilter.length - 1;\n      while (rightNotEmpty > 0 && fxpFilter[rightNotEmpty] === 0) {\n        rightNotEmpty--;\n      }\n\n      filterShift = srcFirst + leftNotEmpty;\n      filterSize = rightNotEmpty - leftNotEmpty + 1;\n\n      packedFilter[packedFilterPtr++] = filterShift; // shift\n      packedFilter[packedFilterPtr++] = filterSize; // size\n\n      if (!slowCopy) {\n        packedFilter.set(fxpFilter.subarray(leftNotEmpty, rightNotEmpty + 1), packedFilterPtr);\n        packedFilterPtr += filterSize;\n      } else {\n        // fallback for old IE < 11, without subarray/set methods\n        for (idx = leftNotEmpty; idx <= rightNotEmpty; idx++) {\n          packedFilter[packedFilterPtr++] = fxpFilter[idx];\n        }\n      }\n    } else {\n      // zero data, write header only\n      packedFilter[packedFilterPtr++] = 0; // shift\n      packedFilter[packedFilterPtr++] = 0; // size\n    }\n  }\n  return packedFilter;\n};\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./~/pica/lib/mathlib/resize_filter_gen.js\n// module id = 2\n// module chunks = 0","'use strict';\n\n\nfunction objClass(obj) { return Object.prototype.toString.call(obj); }\n\n\nmodule.exports.isCanvas = function isCanvas(element) {\n  //return (element.nodeName && element.nodeName.toLowerCase() === 'canvas') ||\n  let cname = objClass(element);\n\n  return cname === '[object HTMLCanvasElement]'/* browser */ ||\n         cname === '[object Canvas]'/* node-canvas */;\n};\n\n\nmodule.exports.isImage = function isImage(element) {\n  //return element.nodeName && element.nodeName.toLowerCase() === 'img';\n  return objClass(element) === '[object HTMLImageElement]';\n};\n\n\nmodule.exports.limiter = function limiter(concurrency) {\n  let active = 0,\n      queue  = [];\n\n  function roll() {\n    if (active < concurrency && queue.length) {\n      active++;\n      queue.shift()();\n    }\n  }\n\n  return function limit(fn) {\n    return new Promise((resolve, reject) => {\n      queue.push(() => {\n        fn().then(\n          result => {\n            resolve(result);\n            active--;\n            roll();\n          },\n          err => {\n            reject(err);\n            active--;\n            roll();\n          }\n        );\n      });\n\n      roll();\n    });\n  };\n};\n\n\nmodule.exports.cib_quality_name = function cib_quality_name(num) {\n  switch (num) {\n    case 0: return 'pixelated';\n    case 1: return 'low';\n    case 2: return 'medium';\n  }\n  return 'high';\n};\n\n\nmodule.exports.cib_support = function cib_support() {\n  return Promise.resolve().then(() => {\n    if (typeof createImageBitmap === 'undefined' ||\n        typeof document === 'undefined') {\n      return false;\n    }\n\n    let c = document.createElement('canvas');\n    c.width = 100;\n    c.height = 100;\n\n    return createImageBitmap(c, 0, 0, 100, 100, {\n      resizeWidth: 10,\n      resizeHeight: 10,\n      resizeQuality: 'high'\n    })\n    .then(bitmap => {\n      let status = (bitmap.width === 10);\n      bitmap.close();\n      c = null;\n      return status;\n    });\n  })\n  .catch(() => false);\n};\n\n\n// [ 64, 65, 66 ] -> [ padding, CR, LF ]\nvar BASE64_MAP = 'ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=\\n\\r';\n\nmodule.exports.base64decode = function base64decode(str) {\n  const input = str.replace(/[\\r\\n=]/g, ''), // remove CR/LF & padding to simplify scan\n        max   = input.length;\n  const result = [];\n\n  // Collect by 6*4 bits (3 bytes)\n\n  let bits  = 0;\n\n  for (let idx = 0; idx < max; idx++) {\n    if ((idx % 4 === 0) && idx) {\n      result.push((bits >> 16) & 0xFF);\n      result.push((bits >> 8) & 0xFF);\n      result.push(bits & 0xFF);\n    }\n\n    bits = (bits << 6) | BASE64_MAP.indexOf(input.charAt(idx));\n  }\n\n  // Dump tail\n\n  let tailbits = (max % 4) * 6;\n\n  if (tailbits === 0) {\n    result.push((bits >> 16) & 0xFF);\n    result.push((bits >> 8) & 0xFF);\n    result.push(bits & 0xFF);\n  } else if (tailbits === 18) {\n    result.push((bits >> 10) & 0xFF);\n    result.push((bits >> 2) & 0xFF);\n  } else if (tailbits === 12) {\n    result.push((bits >> 4) & 0xFF);\n  }\n\n  return new Uint8Array(result);\n};\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./~/pica/lib/utils.js\n// module id = 3\n// module chunks = 0","var bundleFn = arguments[3];\nvar sources = arguments[4];\nvar cache = arguments[5];\n\nvar stringify = JSON.stringify;\n\nmodule.exports = function (fn, options) {\n    var wkey;\n    var cacheKeys = Object.keys(cache);\n\n    for (var i = 0, l = cacheKeys.length; i < l; i++) {\n        var key = cacheKeys[i];\n        var exp = cache[key].exports;\n        // Using babel as a transpiler to use esmodule, the export will always\n        // be an object with the default export as a property of it. To ensure\n        // the existing api and babel esmodule exports are both supported we\n        // check for both\n        if (exp === fn || exp && exp.default === fn) {\n            wkey = key;\n            break;\n        }\n    }\n\n    if (!wkey) {\n        wkey = Math.floor(Math.pow(16, 8) * Math.random()).toString(16);\n        var wcache = {};\n        for (var i = 0, l = cacheKeys.length; i < l; i++) {\n            var key = cacheKeys[i];\n            wcache[key] = key;\n        }\n        sources[wkey] = [\n            Function(['require','module','exports'], '(' + fn + ')(self)'),\n            wcache\n        ];\n    }\n    var skey = Math.floor(Math.pow(16, 8) * Math.random()).toString(16);\n\n    var scache = {}; scache[wkey] = wkey;\n    sources[skey] = [\n        Function(['require'], (\n            // try to call default if defined to also support babel esmodule\n            // exports\n            'var f = require(' + stringify(wkey) + ');' +\n            '(f.default ? f.default : f)(self);'\n        )),\n        scache\n    ];\n\n    var workerSources = {};\n    resolveSources(skey);\n\n    function resolveSources(key) {\n        workerSources[key] = true;\n\n        for (var depPath in sources[key][1]) {\n            var depKey = sources[key][1][depPath];\n            if (!workerSources[depKey]) {\n                resolveSources(depKey);\n            }\n        }\n    }\n\n    var src = '(' + bundleFn + ')({'\n        + Object.keys(workerSources).map(function (key) {\n            return stringify(key) + ':['\n                + sources[key][0]\n                + ',' + stringify(sources[key][1]) + ']'\n            ;\n        }).join(',')\n        + '},{},[' + stringify(skey) + '])'\n    ;\n\n    var URL = window.URL || window.webkitURL || window.mozURL || window.msURL;\n\n    var blob = new Blob([src], { type: 'text/javascript' });\n    if (options && options.bare) { return blob; }\n    var workerUrl = URL.createObjectURL(blob);\n    var worker = new Worker(workerUrl);\n    worker.objectURL = workerUrl;\n    return worker;\n};\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./~/webworkify/index.js\n// module id = 4\n// module chunks = 0","import * as Obstacle from './obstacle.js'\nimport * as PowerCube from './powerup.js'\nimport * as PlatformArrays from './platform-arrays.js'\n\n\nexport var platforms = PlatformArrays.initialPlatforms()\n\n\n\nexport const init = (context, token) => {\n  let gennum\n  if (token === \"regen\"){\n    gennum = 3\n  } else {\n    gennum = 0\n  }\n  // Obstacle.clearObstacles()\n  // PowerCube.clearpowercubes()\n\n  for (let i = gennum; i < platforms.length; i++) {\n    context.strokeStyle = \"#01a502\";\n    context.lineWidth = 5\n    context.strokeRect(platforms[i].x, platforms[i].y, platforms[i].width, 50);\n    if (token === \"restart\"){\n      platforms[i].obstacles = Obstacle.restartFind(i)\n      platforms[i].powercubes = PowerCube.restartFind(i)\n  } else if (token === \"regen\"){\n      PowerCube.clearpowercubes(platforms[0].id)\n      Obstacle.clearObstacles(platforms[0].id)\n      platforms[i].obstacles = Obstacle.init(context, platforms[i], i)\n      platforms[i].powercubes = PowerCube.init(context, platforms[i], i, \"regen\")\n    } else {\n      platforms[i].obstacles = Obstacle.init(context, platforms[i], i)\n      platforms[i].powercubes = PowerCube.init(context, platforms[i], i)\n    }\n  }\n  return platforms\n}\n\n\n\nexport const move = (context) => {\n  for (var i = 0; i < platforms.length; i++) {\n    context.strokeStyle = \"#01a502\";\n    context.lineWidth = 3\n    context.strokeRect(platforms[i].x, platforms[i].y, platforms[i].width, 50);\n    platforms[i].x -= platforms[i].speed\n    platforms[i].obstacles = Obstacle.move(context, platforms[i], i, platforms[i].popped)\n    platforms[i].powercubes = PowerCube.move(context, platforms[i], i, platforms[i].popped)\n  }\n\n  return platforms\n}\n\nexport const generatePlatforms = (context) => {\n  let endoflast = platforms[platforms.length -1].x + platforms[platforms.length -1].width\n  let newplatforms = [platforms[platforms.length-3],platforms[platforms.length - 2],platforms[platforms.length - 1]].concat(PlatformArrays.platformGenerator(endoflast, platforms[platforms.length-1].id))\n\n  platforms = newplatforms\n  // PowerCube.clearpowercubes()\n  // for (var i = 0; i < platforms.length; i++) {\n  //   platforms[i].obstacles = Obstacle.init(context, platforms[i])\n  //   platforms[i].powercubes = PowerCube.init(context, platforms[i], i, \"regen\")\n  // }\n\n\n  init(context, \"regen\")\n\n}\n\nexport const clearPlatforms = () => {\n  PlatformArrays.initialPlatforms()\n  Obstacle.clearObstacles()\n  PowerCube.clearpowercubes()\n}\n\n\n\n// WEBPACK FOOTER //\n// ./lib/platform.js","\n\n\nexport var player = {x: 400, y: 0, jumping: true, direction: null, token: \"start\", doublejumping: false, falling: false}\nexport var vehicleimg = new Image()\nvehicleimg.src = \"assets/images/vehicle.png\"\nvar platform;\nvar doublejumpstart;\nvar doublejumped = false;\nvar falljumpstart;\nvar startpos;\n\n\nexport const resetVehicle = () => {\n  player = { }\n  return player\n}\n\nexport const init = (context) => {\n\n  player = {x: 400, y: 0, jumping: true, direction: null, token: \"start\", doublejumping: false, falling: false}\n  context.drawImage(vehicleimg,player.x,player.y,60,30)\n\n  return player\n}\n\n\nexport const move = (plat, token) => {\n\n  if (player.token === \"start\"){\n    startpos = plat.y - 20;\n    player.jumping = false\n  }\n  else if (token === \"falling\"){\n    player.token = \"falling\"\n  }  else {\n    player.token = null;\n  }\n\n\n\n  platform = plat;\n  const canvas = $(\"canvas\")[0]\n  const context = canvas.getContext(\"2d\")\n\n\n  if  (startpos && player.y === startpos){\n  player.token = null;\n  startpos = null;\n  doublejumped = false\n  doublejumpstart = null;\n  player.token = null;\n  falljumpstart = null;\n\n  }\n   else if  (startpos && player.y < startpos){\n    player.y += 5\n  }\n\n\n\n\n  else if (player.y < (doublejumpstart - 70) && player.doublejumping === true) {\n    player.doublejumping = false\n    player.jumping = false\n    player.y += 5\n  }\n  else if (player.y <= (doublejumpstart) && player.doublejumping === true) {\n    player.y -= 5\n  }\n  else if ((player.y < (doublejumpstart)) && player.doublejumping === false) {\n    player.y += 5\n  }\n\n\n  else if (player.token === \"falling\" && player.jumping === false ){\n    player.y += 5\n  }\n\n  else if  (falljumpstart && player.jumping === true && player.y > falljumpstart - 70 ){\n    player.y -= 5\n  } else if  (falljumpstart && player.jumping === true && player.y === falljumpstart - 70 ){\n    // player.jumping = false\n    falljumpstart = null;\n\n  }\n   else if (player.y <= (platform.y - 90) && player.jumping === true) {\n    player.y -= 5\n    player.jumping = false\n  } else if (player.y < (platform.y - 20) && player.jumping === false) {\n    player.y += 5\n  } else if (player.y === (platform.y - 20) && player.jumping === false){\n    doublejumped = false\n    doublejumpstart = null;\n    player.token = null;\n    falljumpstart = null;\n  } else if (player.y <= (platform.y - 20) && player.jumping === true) {\n    player.y -= 5\n  }\n\n   else if (player.y > platform.y - 20 && player.jumping === false) {\n    player.token = \"falling\"\n  } else if (player.y > platform.y - 20 && player.jumping === true) {\n    player.y -= 5;\n  }\n\n  context.drawImage(vehicleimg,player.x,player.y,60,30)\n\n  return player\n\n}\n\n$(window).keypress((e) => {\n\n\n  if ((e.keyCode === 0 || e.keyCode === 32 || e.keyCode === 119) && player.token === \"start\" ){\n    e.preventDefault();\n    player.jumping = false;\n  }\n  else if ((e.keyCode === 0 || e.keyCode === 32 || e.keyCode === 119) && player.token === \"falling\" && player.jumping === false){\n    e.preventDefault();\n    player.jumping = true;\n    falljumpstart = player.y\n  } else if ((e.keyCode === 0 || e.keyCode === 32 || e.keyCode === 119) && player.token === \"falling\" && player.jumping === true && doublejumped === false){\n    e.preventDefault();\n    player.doublejumping = true;\n    doublejumped = true;\n    doublejumpstart = player.y\n  }\n   else if ((e.keyCode === 0 || e.keyCode === 32 || e.keyCode === 119) && (player.y === (platform.y - 20))) {\n   e.preventDefault();\n   player.jumping = true;\n } else if ((e.keyCode === 0 || e.keyCode === 32 || e.keyCode === 119) && (doublejumped === false)) {\n   e.preventDefault();\n   player.doublejumping = true;\n   doublejumped = true;\n   doublejumpstart = player.y\n }\n})\n\n$(window).keyup((e) => {\n  e.preventDefault()\n  player.direction = null;\n})\n\n\n\n// WEBPACK FOOTER //\n// ./lib/vehicle.js","// Calculate Gaussian blur of an image using IIR filter\n// The method is taken from Intel's white paper and code example attached to it:\n// https://software.intel.com/en-us/articles/iir-gaussian-blur-filter\n// -implementation-using-intel-advanced-vector-extensions\n\nvar a0, a1, a2, a3, b1, b2, left_corner, right_corner;\n\nfunction gaussCoef(sigma) {\n  if (sigma < 0.5) {\n    sigma = 0.5;\n  }\n\n  var a = Math.exp(0.726 * 0.726) / sigma,\n      g1 = Math.exp(-a),\n      g2 = Math.exp(-2 * a),\n      k = (1 - g1) * (1 - g1) / (1 + 2 * a * g1 - g2);\n\n  a0 = k;\n  a1 = k * (a - 1) * g1;\n  a2 = k * (a + 1) * g1;\n  a3 = -k * g2;\n  b1 = 2 * g1;\n  b2 = -g2;\n  left_corner = (a0 + a1) / (1 - b1 - b2);\n  right_corner = (a2 + a3) / (1 - b1 - b2);\n\n  // Attempt to force type to FP32.\n  return new Float32Array([ a0, a1, a2, a3, b1, b2, left_corner, right_corner ]);\n}\n\nfunction convolveMono16(src, out, line, coeff, width, height) {\n  // takes src image and writes the blurred and transposed result into out\n\n  var prev_src, curr_src, curr_out, prev_out, prev_prev_out;\n  var src_index, out_index, line_index;\n  var i, j;\n  var coeff_a0, coeff_a1, coeff_b1, coeff_b2;\n\n  for (i = 0; i < height; i++) {\n    src_index = i * width;\n    out_index = i;\n    line_index = 0;\n\n    // left to right\n    prev_src = src[src_index];\n    prev_prev_out = prev_src * coeff[6];\n    prev_out = prev_prev_out;\n\n    coeff_a0 = coeff[0];\n    coeff_a1 = coeff[1];\n    coeff_b1 = coeff[4];\n    coeff_b2 = coeff[5];\n\n    for (j = 0; j < width; j++) {\n      curr_src = src[src_index];\n\n      curr_out = curr_src * coeff_a0 +\n                 prev_src * coeff_a1 +\n                 prev_out * coeff_b1 +\n                 prev_prev_out * coeff_b2;\n\n      prev_prev_out = prev_out;\n      prev_out = curr_out;\n      prev_src = curr_src;\n\n      line[line_index] = prev_out;\n      line_index++;\n      src_index++;\n    }\n\n    src_index--;\n    line_index--;\n    out_index += height * (width - 1);\n\n    // right to left\n    prev_src = src[src_index];\n    prev_prev_out = prev_src * coeff[7];\n    prev_out = prev_prev_out;\n    curr_src = prev_src;\n\n    coeff_a0 = coeff[2];\n    coeff_a1 = coeff[3];\n\n    for (j = width - 1; j >= 0; j--) {\n      curr_out = curr_src * coeff_a0 +\n                 prev_src * coeff_a1 +\n                 prev_out * coeff_b1 +\n                 prev_prev_out * coeff_b2;\n\n      prev_prev_out = prev_out;\n      prev_out = curr_out;\n\n      prev_src = curr_src;\n      curr_src = src[src_index];\n\n      out[out_index] = line[line_index] + prev_out;\n\n      src_index--;\n      line_index--;\n      out_index -= height;\n    }\n  }\n}\n\n\nfunction blurMono16(src, width, height, radius) {\n  // Quick exit on zero radius\n  if (!radius) { return; }\n\n  var out      = new Uint16Array(src.length),\n      tmp_line = new Float32Array(Math.max(width, height));\n\n  var coeff = gaussCoef(radius);\n\n  convolveMono16(src, out, tmp_line, coeff, width, height, radius);\n  convolveMono16(out, src, tmp_line, coeff, height, width, radius);\n}\n\nmodule.exports = blurMono16;\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./~/glur/mono16.js\n// module id = 7\n// module chunks = 0","/*\nobject-assign\n(c) Sindre Sorhus\n@license MIT\n*/\n\n'use strict';\n/* eslint-disable no-unused-vars */\nvar getOwnPropertySymbols = Object.getOwnPropertySymbols;\nvar hasOwnProperty = Object.prototype.hasOwnProperty;\nvar propIsEnumerable = Object.prototype.propertyIsEnumerable;\n\nfunction toObject(val) {\n\tif (val === null || val === undefined) {\n\t\tthrow new TypeError('Object.assign cannot be called with null or undefined');\n\t}\n\n\treturn Object(val);\n}\n\nfunction shouldUseNative() {\n\ttry {\n\t\tif (!Object.assign) {\n\t\t\treturn false;\n\t\t}\n\n\t\t// Detect buggy property enumeration order in older V8 versions.\n\n\t\t// https://bugs.chromium.org/p/v8/issues/detail?id=4118\n\t\tvar test1 = new String('abc');  // eslint-disable-line no-new-wrappers\n\t\ttest1[5] = 'de';\n\t\tif (Object.getOwnPropertyNames(test1)[0] === '5') {\n\t\t\treturn false;\n\t\t}\n\n\t\t// https://bugs.chromium.org/p/v8/issues/detail?id=3056\n\t\tvar test2 = {};\n\t\tfor (var i = 0; i < 10; i++) {\n\t\t\ttest2['_' + String.fromCharCode(i)] = i;\n\t\t}\n\t\tvar order2 = Object.getOwnPropertyNames(test2).map(function (n) {\n\t\t\treturn test2[n];\n\t\t});\n\t\tif (order2.join('') !== '0123456789') {\n\t\t\treturn false;\n\t\t}\n\n\t\t// https://bugs.chromium.org/p/v8/issues/detail?id=3056\n\t\tvar test3 = {};\n\t\t'abcdefghijklmnopqrst'.split('').forEach(function (letter) {\n\t\t\ttest3[letter] = letter;\n\t\t});\n\t\tif (Object.keys(Object.assign({}, test3)).join('') !==\n\t\t\t\t'abcdefghijklmnopqrst') {\n\t\t\treturn false;\n\t\t}\n\n\t\treturn true;\n\t} catch (err) {\n\t\t// We don't expect any of the above to throw, but better to be safe.\n\t\treturn false;\n\t}\n}\n\nmodule.exports = shouldUseNative() ? Object.assign : function (target, source) {\n\tvar from;\n\tvar to = toObject(target);\n\tvar symbols;\n\n\tfor (var s = 1; s < arguments.length; s++) {\n\t\tfrom = Object(arguments[s]);\n\n\t\tfor (var key in from) {\n\t\t\tif (hasOwnProperty.call(from, key)) {\n\t\t\t\tto[key] = from[key];\n\t\t\t}\n\t\t}\n\n\t\tif (getOwnPropertySymbols) {\n\t\t\tsymbols = getOwnPropertySymbols(from);\n\t\t\tfor (var i = 0; i < symbols.length; i++) {\n\t\t\t\tif (propIsEnumerable.call(from, symbols[i])) {\n\t\t\t\t\tto[symbols[i]] = from[symbols[i]];\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n\n\treturn to;\n};\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./~/object-assign/index.js\n// module id = 8\n// module chunks = 0","'use strict';\n\n\nconst assign        = require('object-assign');\nconst webworkify    = require('webworkify');\n\n\nconst MathLib       = require('./lib/mathlib');\nconst Pool          = require('./lib/pool');\nconst utils         = require('./lib/utils');\nconst worker        = require('./lib/worker');\nconst createRegions = require('./lib/tiler');\n\n\n// Deduplicate pools & limiters with the same configs\n// when user creates multiple pica instances.\nconst singletones = {};\n\n\nlet NEED_SAFARI_FIX = false;\ntry {\n  if (typeof navigator !== 'undefined' && navigator.userAgent) {\n    NEED_SAFARI_FIX = navigator.userAgent.indexOf('Safari') >= 0;\n  }\n} catch (e) {}\n\n\nlet concurrency = 1;\nif (typeof navigator !== 'undefined') {\n  concurrency = Math.min(navigator.hardwareConcurrency || 1, 4);\n}\n\n\nconst DEFAULT_PICA_OPTS = {\n  tile: 1024,\n  concurrency,\n  features: [ 'js', 'wasm', 'ww' ],\n  idle: 2000\n};\n\n\nconst DEFAULT_RESIZE_OPTS = {\n  quality:          3,\n  alpha:            false,\n  unsharpAmount:    0,\n  unsharpRadius:    0.0,\n  unsharpThreshold: 0\n};\n\nlet CAN_NEW_IMAGE_DATA;\n\n\nfunction workerFabric() {\n  return {\n    value: webworkify(worker),\n    destroy: function () {\n      this.value.terminate();\n\n      if (typeof window !== 'undefined') {\n        let url = window.URL || window.webkitURL || window.mozURL || window.msURL;\n        if (url && url.revokeObjectURL && this.value.objectURL) {\n          url.revokeObjectURL(this.value.objectURL);\n        }\n      }\n    }\n  };\n}\n\n\n////////////////////////////////////////////////////////////////////////////////\n// API methods\n\nfunction Pica(options) {\n  if (!(this instanceof Pica)) return new Pica(options);\n\n  this.options = assign(DEFAULT_PICA_OPTS, options || {});\n\n  let limiter_key = `lk_${this.options.concurrency}`;\n\n  // Share limiters to avoid multiple parallel workers when user creates\n  // multiple pica instances.\n  this.__limit = singletones[limiter_key] || utils.limiter(this.options.concurrency);\n\n  if (!singletones[limiter_key]) singletones[limiter_key] = this.__limit;\n\n  // List of supported features, according to options & browser/node.js\n  this.features = {\n    js:   false, // pure JS implementation, can be disabled for testing\n    wasm: false, // webassembly implementation for heavy functions\n    cib:  false, // resize via createImageBitmap (only FF at this moment)\n    ww:   false  // webworkers\n  };\n\n  this.__workersPool = null;\n\n  // Store requested features for webworkers\n  this.__requested_features = [];\n\n  this.__mathlib = null;\n}\n\n\nPica.prototype.init = function () {\n  if (this.__initPromise) return this.__initPromise;\n\n  // Test if we can create ImageData without canvas and memory copy\n  if (CAN_NEW_IMAGE_DATA !== false && CAN_NEW_IMAGE_DATA !== true) {\n    CAN_NEW_IMAGE_DATA = false;\n    if (typeof ImageData !== 'undefined' && typeof Uint8ClampedArray !== 'undefined') {\n      try {\n        /* eslint-disable no-new */\n        new ImageData(new Uint8ClampedArray(400), 10, 10);\n        CAN_NEW_IMAGE_DATA = true;\n      } catch (__) {}\n    }\n  }\n\n\n  let features = this.options.features.slice();\n\n  if (features.indexOf('all') >= 0) {\n    features = [ 'cib', 'wasm', 'js', 'ww' ];\n  }\n\n  this.__requested_features = features;\n\n  this.__mathlib = new MathLib(features);\n\n  // Check WebWorker support if requested\n  if (features.indexOf('ww') >= 0) {\n    if ((typeof window !== 'undefined') && ('Worker' in window)) {\n      // IE <= 11 don't allow to create webworkers from string. We should check it.\n      // https://connect.microsoft.com/IE/feedback/details/801810/web-workers-from-blob-urls-in-ie-10-and-11\n      try {\n        let wkr = require('webworkify')(function () {});\n        wkr.terminate();\n        this.features.ww   = true;\n\n        // pool uniqueness depends on pool config + webworker config\n        let wpool_key = `wp_${JSON.stringify(this.options)}`;\n\n        if (singletones[wpool_key]) {\n          this.__workersPool = singletones[wpool_key];\n        } else {\n          this.__workersPool = new Pool(workerFabric, this.options.idle);\n          singletones[wpool_key] = this.__workersPool;\n        }\n      } catch (__) {}\n    }\n  }\n\n  let initMath = this.__mathlib.init().then(mathlib => {\n    // Copy detected features\n    assign(this.features, mathlib.features);\n  });\n\n  let checkCib = utils.cib_support().then(status => {\n    if (this.features.cib && features.indexOf('cib') < 0) {\n      this.debug('createImageBitmap() resize supported, but disabled by config');\n      return;\n    }\n\n    if (features.indexOf('cib') >= 0) this.features.cib = status;\n  });\n\n  // Init math lib. That's async because can load some\n  this.__initPromise = Promise.all([ initMath, checkCib ]).then(() => this);\n\n  return this.__initPromise;\n};\n\n\nPica.prototype.resize = function (from, to, options) {\n  this.debug('Start resize...');\n\n\n  let opts = DEFAULT_RESIZE_OPTS;\n\n  if (!isNaN(options)) {\n    opts = assign(opts, { quality: options });\n  } else if (options) {\n    opts = assign(opts, options);\n  }\n\n  opts.toWidth  = to.width;\n  opts.toHeigth = to.height;\n  opts.width    = from.naturalWidth || from.width;\n  opts.height   = from.naturalHeight || from.height;\n\n  let canceled    = false;\n  let cancelToken = null;\n\n  if (opts.cancelToken) {\n    // Wrap cancelToken to avoid successive resolve & set flag\n    cancelToken = opts.cancelToken.then(\n      data => { canceled = true; throw data; },\n      err  => { canceled = true; throw err; }\n    );\n  }\n\n  let toCtx = to.getContext('2d', { alpha: Boolean(opts.alpha) });\n\n  return this.init().then(() => {\n    if (canceled) return cancelToken;\n\n    // if createImageBitmap supports resize, just do it and return\n    if (this.features.cib) {\n      this.debug('Resize via createImageBitmap()');\n\n      return createImageBitmap(from, {\n        resizeWidth:   opts.toWidth,\n        resizeHeight:  opts.toHeigth,\n        resizeQuality: utils.cib_quality_name(opts.quality)\n      })\n      .then(imageBitmap => {\n        if (canceled) return cancelToken;\n\n        // if no unsharp - draw directly to output canvas\n        if (!opts.unsharpAmount) {\n          toCtx.drawImage(imageBitmap, 0, 0);\n          imageBitmap.close();\n          toCtx = null;\n\n          this.debug('Finished!');\n\n          return to;\n        }\n\n        this.debug('Unsharp result');\n\n        let tmpCanvas = document.createElement('canvas');\n\n        tmpCanvas.width  = opts.toWidth;\n        tmpCanvas.height = opts.toHeigth;\n\n        let tmpCtx = tmpCanvas.getContext('2d', { alpha: Boolean(opts.alpha) });\n\n        tmpCtx.drawImage(imageBitmap, 0, 0);\n        imageBitmap.close();\n\n        let iData = tmpCtx.getImageData(0, 0, opts.toWidth, opts.toHeigth);\n\n        this.__mathlib.unsharp(\n          iData.data,\n          opts.toWidth,\n          opts.toHeigth,\n          opts.unsharpAmount,\n          opts.unsharpRadius,\n          opts.unsharpThreshold\n        );\n\n        toCtx.putImageData(iData, 0, 0);\n        iData = tmpCtx = tmpCanvas = toCtx = null;\n\n        this.debug('Finished!');\n\n        return to;\n      });\n    }\n\n    //\n    // No easy way, let's resize manually via arrays\n    //\n\n    let srcCtx;\n    let srcImageBitmap;\n\n    // Share cache between calls:\n    //\n    // - wasm instance\n    // - wasm memory object\n    //\n    let cache = {};\n\n    // Call resizer in webworker or locally, depending on config\n    const invokeResize = opts => {\n      return Promise.resolve().then(() => {\n        if (!this.features.ww) return this.__mathlib.resizeAndUnsharp(opts, cache);\n\n        return new Promise((resolve, reject) => {\n          let w = this.__workersPool.acquire();\n\n          if (cancelToken) cancelToken.catch(err => reject(err));\n\n          w.value.onmessage = ev => {\n            w.release();\n\n            if (ev.data.err) reject(ev.data.err);\n            else resolve(ev.data.result);\n          };\n\n          w.value.postMessage({\n            opts,\n            features: this.__requested_features,\n            preload: {\n              wasm_nodule: this.__mathlib.__\n            }\n          }, [ opts.src.buffer ]);\n        });\n      });\n    };\n\n\n    const processTile = (tile => this.__limit(() => {\n      if (canceled) return cancelToken;\n\n      let srcImageData;\n\n      // Extract tile RGBA buffer, depending on input type\n      if (utils.isCanvas(from)) {\n        this.debug('Get tile pixel data');\n\n        // If input is Canvas - extract region data directly\n        srcImageData = srcCtx.getImageData(tile.x, tile.y, tile.width, tile.height);\n      } else {\n        // If input is Image or decoded to ImageBitmap,\n        // draw region to temporary canvas and extract data from it\n        //\n        // Note! Attempt to reuse this canvas causes significant slowdown in chrome\n        //\n        this.debug('Draw tile imageBitmap/image to temporary canvas');\n\n        let tmpCanvas = document.createElement('canvas');\n        tmpCanvas.width  = tile.width;\n        tmpCanvas.height = tile.height;\n\n        let tmpCtx = tmpCanvas.getContext('2d', { alpha: Boolean(opts.alpha) });\n        tmpCtx.globalCompositeOperation = 'copy';\n        tmpCtx.drawImage(srcImageBitmap || from,\n          tile.x, tile.y, tile.width, tile.height,\n          0, 0, tile.width, tile.height);\n\n        this.debug('Get tile pixel data');\n\n        srcImageData = tmpCtx.getImageData(0, 0, tile.width, tile.height);\n        tmpCtx = tmpCanvas = null;\n      }\n\n      let o = {\n        src:              srcImageData.data,\n        width:            tile.width,\n        height:           tile.height,\n        toWidth:          tile.toWidth,\n        toHeight:         tile.toHeight,\n        scaleX:           tile.scaleX,\n        scaleY:           tile.scaleY,\n        offsetX:          tile.offsetX,\n        offsetY:          tile.offsetY,\n        quality:          opts.quality,\n        alpha:            opts.alpha,\n        unsharpAmount:    opts.unsharpAmount,\n        unsharpRadius:    opts.unsharpRadius,\n        unsharpThreshold: opts.unsharpThreshold\n      };\n\n      this.debug('Invoke resize math');\n\n      return Promise.resolve()\n        .then(() => invokeResize(o))\n        .then(result => {\n          if (canceled) return cancelToken;\n\n          srcImageData = null;\n\n          let toImageData;\n\n          this.debug('Convert raw rgba tile result to ImageData');\n\n          if (CAN_NEW_IMAGE_DATA) {\n            // this branch is for modern browsers\n            // If `new ImageData()` & Uint8ClampedArray suported\n            toImageData = new ImageData(new Uint8ClampedArray(result), tile.toWidth, tile.toHeight);\n          } else {\n            // fallback for `node-canvas` and old browsers\n            // (IE11 has ImageData but does not support `new ImageData()`)\n            toImageData = toCtx.createImageData(tile.toWidth, tile.toHeight);\n\n            if (toImageData.data.set) {\n              toImageData.data.set(result);\n            } else {\n              // IE9 don't have `.set()`\n              for (let i = toImageData.data.length - 1; i >= 0; i--) {\n                toImageData.data[i] = result[i];\n              }\n            }\n          }\n\n          this.debug('Draw tile');\n\n          if (NEED_SAFARI_FIX) {\n            // Safari draws thin white stripes between tiles without this fix\n            toCtx.putImageData(toImageData, tile.toX, tile.toY,\n              tile.toInnerX - tile.toX, tile.toInnerY - tile.toY,\n              tile.toInnerWidth + 1e-5, tile.toInnerHeight + 1e-5);\n          } else {\n            toCtx.putImageData(toImageData, tile.toX, tile.toY,\n              tile.toInnerX - tile.toX, tile.toInnerY - tile.toY,\n              tile.toInnerWidth, tile.toInnerHeight);\n          }\n\n          return null;\n        });\n    }));\n\n\n    // Need normalize data source first. It can be canvas or image.\n    // If image - try to decode in background if possible\n    return Promise.resolve().then(() => {\n      if (utils.isCanvas(from)) {\n        srcCtx = from.getContext('2d', { alpha: Boolean(opts.alpha) });\n        return null;\n      }\n\n      if (utils.isImage(from)) {\n        // try do decode image in background for faster next operations\n        if (typeof createImageBitmap === 'undefined') return null;\n\n        this.debug('Decode image via createImageBitmap');\n\n        return createImageBitmap(from)\n          .then(imageBitmap => {\n            srcImageBitmap = imageBitmap;\n          });\n      }\n\n      throw new Error('\".from\" should be image or canvas');\n    })\n    .then(() => {\n      if (canceled) return cancelToken;\n\n      this.debug('Calculate tiles');\n\n      //\n      // Here we are with \"normalized\" source,\n      // follow to tiling\n      //\n\n      let DEST_TILE_BORDER = 3; // Max possible filter window size\n\n      let regions = createRegions({\n        width:        opts.width,\n        height:       opts.height,\n        srcTileSize:  this.options.tile,\n        toWidth:      opts.toWidth,\n        toHeight:     opts.toHeigth,\n        destTileBorder: Math.ceil(Math.max(DEST_TILE_BORDER, 2.5 * opts.unsharpRadius|0))\n      });\n\n      let jobs = regions.map(tile => processTile(tile));\n\n      function cleanup() {\n        if (srcImageBitmap) {\n          srcImageBitmap.close();\n          srcImageBitmap = null;\n        }\n      }\n\n      this.debug('Process tiles');\n\n      return Promise.all(jobs).then(\n        () =>  {\n          this.debug('Finished!');\n          cleanup(); return to;\n        },\n        err => { cleanup(); throw err; }\n      );\n    });\n  });\n};\n\n// RGBA buffer resize\n//\nPica.prototype.resizeBuffer = function (options) {\n  const opts = assign(DEFAULT_RESIZE_OPTS, options);\n\n  return this.init()\n    .then(() => this.__mathlib.resizeAndUnsharp(opts));\n};\n\n\nPica.prototype.toBlob = function (canvas, mimeType, quality) {\n  mimeType = mimeType || 'image/png';\n\n  return new Promise(resolve => {\n    if (canvas.toBlob) {\n      canvas.toBlob(blob => resolve(blob), mimeType, quality);\n      return;\n    }\n\n    // Fallback for old browsers\n    const asString = atob(canvas.toDataURL(mimeType, quality).split(',')[1]);\n    const len      = asString.length;\n    const asBuffer = new Uint8Array(len);\n\n    for (let i = 0; i < len; i++) {\n      asBuffer[i] = asString.charCodeAt(i);\n    }\n\n    resolve(new Blob([ asBuffer ], { type: mimeType }));\n  });\n};\n\n\nPica.prototype.debug = function () {};\n\n\nmodule.exports = Pica;\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./~/pica/index.js\n// module id = 9\n// module chunks = 0","// Calculates 16-bit precision lightness from 8-bit rgba buffer\n//\n'use strict';\n\n\nmodule.exports = function lightness16_js(img, width, height) {\n  var size = width * height;\n  var out = new Uint16Array(size);\n  var r, g, b, min, max;\n  for (var i = 0; i < size; i++) {\n    r = img[4 * i];\n    g = img[4 * i + 1];\n    b = img[4 * i + 2];\n    max = (r >= g && r >= b) ? r : (g >= b && g >= r) ? g : b;\n    min = (r <= g && r <= b) ? r : (g <= b && g <= r) ? g : b;\n    out[i] = (max + min) * 257 >> 1;\n  }\n  return out;\n};\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./~/pica/lib/mathlib/lightness16_js.js\n// module id = 10\n// module chunks = 0","// Filter definitions to build tables for\n// resizing convolvers.\n//\n// Presets for quality 0..3. Filter functions + window size\n//\n'use strict';\n\n\nmodule.exports = [\n  { // Nearest neibor (Box)\n    win: 0.5,\n    filter: function (x) {\n      return (x >= -0.5 && x < 0.5) ? 1.0 : 0.0;\n    }\n  },\n  { // Hamming\n    win: 1.0,\n    filter: function (x) {\n      if (x <= -1.0 || x >= 1.0) { return 0.0; }\n      if (x > -1.19209290E-07 && x < 1.19209290E-07) { return 1.0; }\n      var xpi = x * Math.PI;\n      return ((Math.sin(xpi) / xpi) *  (0.54 + 0.46 * Math.cos(xpi / 1.0)));\n    }\n  },\n  { // Lanczos, win = 2\n    win: 2.0,\n    filter: function (x) {\n      if (x <= -2.0 || x >= 2.0) { return 0.0; }\n      if (x > -1.19209290E-07 && x < 1.19209290E-07) { return 1.0; }\n      var xpi = x * Math.PI;\n      return (Math.sin(xpi) / xpi) * Math.sin(xpi / 2.0) / (xpi / 2.0);\n    }\n  },\n  { // Lanczos, win = 3\n    win: 3.0,\n    filter: function (x) {\n      if (x <= -3.0 || x >= 3.0) { return 0.0; }\n      if (x > -1.19209290E-07 && x < 1.19209290E-07) { return 1.0; }\n      var xpi = x * Math.PI;\n      return (Math.sin(xpi) / xpi) * Math.sin(xpi / 3.0) / (xpi / 3.0);\n    }\n  }\n];\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./~/pica/lib/mathlib/resize_filter_info.js\n// module id = 11\n// module chunks = 0","'use strict';\n\n\nconst createFilters        = require('./resize_filter_gen');\nconst convolveHorizontally = require('./resize_convolve_js').convolveHorizontally;\nconst convolveVertically   = require('./resize_convolve_js').convolveVertically;\n\n\nfunction resetAlpha(dst, width, height) {\n  let ptr = 3, len = (width * height * 4)|0;\n  while (ptr < len) { dst[ptr] = 0xFF; ptr = (ptr + 4)|0; }\n}\n\n\nfunction resize(options, cache) {\n  const src   = options.src;\n  const srcW  = options.width;\n  const srcH  = options.height;\n  const destW = options.toWidth;\n  const destH = options.toHeight;\n  const scaleX = options.scaleX || options.toWidth / options.width;\n  const scaleY = options.scaleY || options.toHeight / options.height;\n  const offsetX = options.offsetX || 0;\n  const offsetY = options.offsetY || 0;\n  const dest  = options.dest || new Uint8Array(destW * destH * 4);\n  const quality = typeof options.quality === 'undefined' ? 3 : options.quality;\n  const alpha = options.alpha || false;\n\n  if (srcW < 1 || srcH < 1 || destW < 1 || destH < 1) { return []; }\n\n  if (!cache) cache = {};\n\n  const fx_key = `filter_${quality}|${srcW}|${destW}|${scaleX}|${offsetX}`;\n  const fy_key = `filter_${quality}|${srcH}|${destH}|${scaleY}|${offsetY}`;\n\n  const filtersX = cache[fx_key] || createFilters(quality, srcW, destW, scaleX, offsetX),\n        filtersY = cache[fy_key] || createFilters(quality, srcH, destH, scaleY, offsetY);\n\n  //if (!cache[fx_key]) cache[fx_key] = filtersX;\n  //if (!cache[fy_key]) cache[fy_key] = filtersY;\n\n  const tmp  = new Uint8Array(destW * srcH * 4);\n\n  // To use single function we need src & tmp of the same type.\n  // But src can be CanvasPixelArray, and tmp - Uint8Array. So, keep\n  // vertical and horizontal passes separately to avoid deoptimization.\n\n  convolveHorizontally(src, tmp, srcW, srcH, destW, filtersX);\n  convolveVertically(tmp, dest, srcH, destW, destH, filtersY);\n\n  // That's faster than doing checks in convolver.\n  // !!! Note, canvas data is not premultipled. We don't need other\n  // alpha corrections.\n\n  if (!alpha) resetAlpha(dest, destW, destH);\n\n  return dest;\n}\n\n\nmodule.exports = resize;\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./~/pica/lib/mathlib/resize_js.js\n// module id = 12\n// module chunks = 0","// Unsharp mask filter\n//\n// http://stackoverflow.com/a/23322820/1031804\n// USM(O) = O + (2 * (Amount / 100) * (O - GB))\n// GB - gaussian blur.\n//\n// Image is converted from RGB to HSL, unsharp mask is applied to the\n// lightness channel and then image is converted back to RGB.\n//\n'use strict';\n\n\nvar glurMono16   = require('glur/mono16');\nvar getLightness = require('./lightness16_js');\n\n\nmodule.exports = function unsharp(img, width, height, amount, radius, threshold) {\n  var r, g, b;\n  var h, s, l;\n  var min, max;\n  var m1, m2, hShifted;\n  var diff, iTimes4;\n\n  if (amount === 0 || radius < 0.5) {\n    return;\n  }\n  if (radius > 2.0) {\n    radius = 2.0;\n  }\n\n  var lightness = getLightness(img, width, height);\n\n  var blured = new Uint16Array(lightness); // copy, because blur modify src\n\n  glurMono16(blured, width, height, radius);\n\n  var amountFp = (amount / 100 * 0x1000 + 0.5)|0;\n  var thresholdFp = (threshold * 257)|0;\n\n  var size = width * height;\n\n  for (var i = 0; i < size; i++) {\n    diff = 2 * (lightness[i] - blured[i]);\n\n    if (Math.abs(diff) >= thresholdFp) {\n      iTimes4 = i * 4;\n      r = img[iTimes4];\n      g = img[iTimes4 + 1];\n      b = img[iTimes4 + 2];\n\n      // convert RGB to HSL\n      // take RGB, 8-bit unsigned integer per each channel\n      // save HSL, H and L are 16-bit unsigned integers, S is 12-bit unsigned integer\n      // math is taken from here: http://www.easyrgb.com/index.php?X=MATH&H=18\n      // and adopted to be integer (fixed point in fact) for sake of performance\n      max = (r >= g && r >= b) ? r : (g >= r && g >= b) ? g : b; // min and max are in [0..0xff]\n      min = (r <= g && r <= b) ? r : (g <= r && g <= b) ? g : b;\n      l = (max + min) * 257 >> 1; // l is in [0..0xffff] that is caused by multiplication by 257\n\n      if (min === max) {\n        h = s = 0;\n      } else {\n        s = (l <= 0x7fff) ?\n          (((max - min) * 0xfff) / (max + min))|0 :\n          (((max - min) * 0xfff) / (2 * 0xff - max - min))|0; // s is in [0..0xfff]\n        // h could be less 0, it will be fixed in backward conversion to RGB, |h| <= 0xffff / 6\n        h = (r === max) ? (((g - b) * 0xffff) / (6 * (max - min)))|0\n          : (g === max) ? 0x5555 + ((((b - r) * 0xffff) / (6 * (max - min)))|0) // 0x5555 == 0xffff / 3\n          : 0xaaaa + ((((r - g) * 0xffff) / (6 * (max - min)))|0); // 0xaaaa == 0xffff * 2 / 3\n      }\n\n      // add unsharp mask mask to the lightness channel\n      l += (amountFp * diff + 0x800) >> 12;\n      if (l > 0xffff) {\n        l = 0xffff;\n      } else if (l < 0) {\n        l = 0;\n      }\n\n      // convert HSL back to RGB\n      // for information about math look above\n      if (s === 0) {\n        r = g = b = l >> 8;\n      } else {\n        m2 = (l <= 0x7fff) ? (l * (0x1000 + s) + 0x800) >> 12 :\n          l  + (((0xffff - l) * s + 0x800) >>  12);\n        m1 = 2 * l - m2 >> 8;\n        m2 >>= 8;\n        // save result to RGB channels\n        // R channel\n        hShifted = (h + 0x5555) & 0xffff; // 0x5555 == 0xffff / 3\n        r = (hShifted >= 0xaaaa) ? m1 // 0xaaaa == 0xffff * 2 / 3\n          : (hShifted >= 0x7fff) ?  m1 + ((m2 - m1) * 6 * (0xaaaa - hShifted) + 0x8000 >> 16)\n          : (hShifted >= 0x2aaa) ? m2 // 0x2aaa == 0xffff / 6\n          : m1 + ((m2 - m1) * 6 * hShifted + 0x8000 >> 16);\n        // G channel\n        hShifted = h & 0xffff;\n        g = (hShifted >= 0xaaaa) ? m1 // 0xaaaa == 0xffff * 2 / 3\n          : (hShifted >= 0x7fff) ?  m1 + ((m2 - m1) * 6 * (0xaaaa - hShifted) + 0x8000 >> 16)\n          : (hShifted >= 0x2aaa) ? m2 // 0x2aaa == 0xffff / 6\n          : m1 + ((m2 - m1) * 6 * hShifted + 0x8000 >> 16);\n        // B channel\n        hShifted = (h - 0x5555) & 0xffff;\n        b = (hShifted >= 0xaaaa) ? m1 // 0xaaaa == 0xffff * 2 / 3\n          : (hShifted >= 0x7fff) ?  m1 + ((m2 - m1) * 6 * (0xaaaa - hShifted) + 0x8000 >> 16)\n          : (hShifted >= 0x2aaa) ? m2 // 0x2aaa == 0xffff / 6\n          : m1 + ((m2 - m1) * 6 * hShifted + 0x8000 >> 16);\n      }\n\n      img[iTimes4] = r;\n      img[iTimes4 + 1] = g;\n      img[iTimes4 + 2] = b;\n    }\n  }\n};\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./~/pica/lib/mathlib/unsharp_js.js\n// module id = 13\n// module chunks = 0","// This is autogenerated file from math.wasm, don't edit.\n//\n'use strict';\n\n/* eslint-disable max-len */\nmodule.exports = 'AGFzbQEAAAABlICAgAACYAZ/f39/f38AYAd/f39/f39/AAKPgICAAAEDZW52Bm1lbW9yeQIAAQODgICAAAIAAQSEgICAAAFwAAAHmYCAgAACCGNvbnZvbHZlAAAKY29udm9sdmVIVgABCYGAgIAAAArtg4CAAALBg4CAAAEQfwJAIANFDQAgBEUNACAFQQRqIRVBACEMQQAhDQNAIA0hDkEAIRFBACEHA0AgB0ECaiESAn8gBSAHQQF0IgdqIgZBAmouAQAiEwRAQQAhCEEAIBNrIRQgFSAHaiEPIAAgDCAGLgEAakECdGohEEEAIQlBACEKQQAhCwNAIBAoAgAiB0EYdiAPLgEAIgZsIAtqIQsgB0H/AXEgBmwgCGohCCAHQRB2Qf8BcSAGbCAKaiEKIAdBCHZB/wFxIAZsIAlqIQkgD0ECaiEPIBBBBGohECAUQQFqIhQNAAsgEiATagwBC0EAIQtBACEKQQAhCUEAIQggEgshByABIA5BAnRqIApBgMAAakEOdSIGQf8BIAZB/wFIG0EQdEGAgPwHcUEAIAZBAEobIAtBgMAAakEOdSIGQf8BIAZB/wFIG0EYdEEAIAZBAEobciAJQYDAAGpBDnUiBkH/ASAGQf8BSBtBCHRBgP4DcUEAIAZBAEobciAIQYDAAGpBDnUiBkH/ASAGQf8BSBtB/wFxQQAgBkEAShtyNgIAIA4gA2ohDiARQQFqIhEgBEcNAAsgDCACaiEMIA1BAWoiDSADRw0ACwsLoYCAgAAAAkBBACACIAMgBCAFIAAQACACQQAgBCAFIAYgARAACws=';\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./~/pica/lib/mathlib/wasm/math_wasm_base64.js\n// module id = 14\n// module chunks = 0","'use strict';\n\n\nconst GC_INTERVAL = 100;\n\n\nfunction Pool(create, idle) {\n  this.create = create;\n\n  this.available = [];\n  this.acquired = {};\n  this.lastId = 1;\n\n  this.timeoutId = 0;\n  this.idle = idle || 2000;\n}\n\n\nPool.prototype.acquire = function () {\n  let resource;\n\n  if (this.available.length !== 0) {\n    resource = this.available.pop();\n  } else {\n    resource = this.create();\n    resource.id = this.lastId++;\n    resource.release = () => this.release(resource);\n  }\n  this.acquired[resource.id] = resource;\n  return resource;\n};\n\n\nPool.prototype.release = function (resource) {\n  delete this.acquired[resource.id];\n\n  resource.lastUsed = Date.now();\n  this.available.push(resource);\n\n  if (this.timeoutId === 0) {\n    this.timeoutId = setTimeout(() => this.gc(), GC_INTERVAL);\n  }\n};\n\n\nPool.prototype.gc = function () {\n  const now = Date.now();\n\n  this.available = this.available.filter(resource => {\n    if (now - resource.lastUsed > this.idle) {\n      resource.destroy();\n      return false;\n    }\n    return true;\n  });\n\n  if (this.available.length !== 0) {\n    this.timeoutId = setTimeout(() => this.gc(), GC_INTERVAL);\n  } else {\n    this.timeoutId = 0;\n  }\n};\n\n\nmodule.exports = Pool;\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./~/pica/lib/pool.js\n// module id = 15\n// module chunks = 0","'use strict';\n\n/*\n * pixelFloor and pixelCeil are modified versions of Math.floor and Math.ceil\n * functions which take into account floating point arithmetic errors.\n * Those errors can cause undesired increments/decrements of sizes and offsets:\n * Math.ceil(36 / (36 / 500)) = 501\n * pixelCeil(36 / (36 / 500)) = 500\n */\n\nvar PIXEL_EPSILON = 1e-5;\n\nfunction pixelFloor(x) {\n  var nearest = Math.round(x);\n\n  if (Math.abs(x - nearest) < PIXEL_EPSILON) { return nearest; }\n  return Math.floor(x);\n}\n\nfunction pixelCeil(x) {\n  var nearest = Math.round(x);\n\n  if (Math.abs(x - nearest) < PIXEL_EPSILON) { return nearest; }\n  return Math.ceil(x);\n}\n\n\nmodule.exports = function createRegions(options) {\n  var scaleX = options.toWidth / options.width;\n  var scaleY = options.toHeight / options.height;\n\n  var innerTileWidth = pixelFloor(options.srcTileSize * scaleX) - 2 * options.destTileBorder;\n  var innerTileHeight = pixelFloor(options.srcTileSize * scaleY) - 2 * options.destTileBorder;\n\n  var x, y;\n  var innerX, innerY, toTileWidth, toTileHeight;\n  var tiles = [];\n  var tile;\n\n  // we go top-to-down instead of left-to-right to make image displayed from top to\n  // doesn in the browser\n  for (innerY = 0; innerY < options.toHeight; innerY += innerTileHeight) {\n    for (innerX = 0; innerX < options.toWidth; innerX += innerTileWidth) {\n      x = innerX - options.destTileBorder;\n      if (x < 0) { x = 0; }\n      toTileWidth = innerX + innerTileWidth + options.destTileBorder - x;\n      if (x + toTileWidth >= options.toWidth) {\n        toTileWidth = options.toWidth - x;\n      }\n\n      y = innerY - options.destTileBorder;\n      if (y < 0) { y = 0; }\n      toTileHeight = innerY + innerTileHeight + options.destTileBorder - y;\n      if (y + toTileHeight >= options.toHeight) {\n        toTileHeight = options.toHeight - y;\n      }\n\n      tile = {\n        toX: x,\n        toY: y,\n        toWidth: toTileWidth,\n        toHeight: toTileHeight,\n\n        toInnerX: innerX,\n        toInnerY: innerY,\n        toInnerWidth: innerTileWidth,\n        toInnerHeight: innerTileHeight,\n\n        offsetX: x / scaleX - pixelFloor(x / scaleX),\n        offsetY: y / scaleY - pixelFloor(y / scaleY),\n        scaleX: scaleX,\n        scaleY: scaleY,\n\n        x: pixelFloor(x / scaleX),\n        y: pixelFloor(y / scaleY),\n        width: pixelCeil(toTileWidth / scaleX),\n        height: pixelCeil(toTileHeight / scaleY)\n      };\n\n      tiles.push(tile);\n    }\n  }\n\n  return tiles;\n};\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./~/pica/lib/tiler.js\n// module id = 16\n// module chunks = 0","// Web Worker wrapper for image resize function\n\n'use strict';\n\nmodule.exports = function () {\n  const MathLib = require('./mathlib');\n\n  let mathLib;\n  let cache = {};\n\n  /* eslint-disable no-undef */\n  onmessage = function (ev) {\n    let opts = ev.data.opts;\n\n    if (!mathLib) mathLib = new MathLib(ev.data.features, ev.data.preload);\n\n    mathLib.init(function (err) {\n      if (err) {\n        postMessage({ err });\n        return;\n      }\n\n      let result = mathLib.resizeAndUnsharp(opts, cache);\n      postMessage({ result }, [ result.buffer ]);\n    });\n  };\n};\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./~/pica/lib/worker.js\n// module id = 17\n// module chunks = 0","import Pica from 'pica'\n\nexport var obstacleimage = new Image()\nobstacleimage.src = \"assets/images/obstacle.png\"\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nexport var obstacles = [];\n\n// const canvas = $(\"canvas\")[0]\n// const context = canvas.getContext(\"2d\")\n\n\n\nexport const init = (context, platform, id) => {\n  // const canvas = $(\"canvas\")[0]\n  // const context = canvas.getContext(\"2d\")\n\n  if (!obstacles[id]){\n    obstacles.push({x: (platform.x + 400), y: platform.y - 35, platformID: id})\n  }\n\n  for (var i = 0; i < obstacles.length; i++) {\n    context.drawImage(obstacleimage,obstacles[i].x,obstacles[i].y,30,40)\n  }\n\n\n  return obstacles[id]\n}\n\nexport const move = (context, platform, id) => {\n  for (var i = 0; i < obstacles.length; i++) {\n    if(i === id) obstacles[i].x = platform.x + 400;\n    context.drawImage(obstacleimage,obstacles[i].x,obstacles[i].y,30,40)\n  }\n  return obstacles[id]\n}\n\nexport const clearObstacles = (num) => {\n  if (num){\n    obstacles = obstacles.filter(obstacle => obstacle.platformID >= num)\n  } else obstacles = [];\n}\n\nexport const restartFind = (id) => {\n  return obstacles.filter(obstacle => (\n    obstacle.platformID === id\n  ))\n}\n\n\n\n// WEBPACK FOOTER //\n// ./lib/obstacle.js","\n\n\nexport var powercubes = [];\n\n\nexport const init = (context, platform, id, token) => {\n\n if (token === \"regen\"){\n   if (id >= 3){\n   for (let i = 0; i < calcCubes(); i++) {\n\n     powercubes.push({x: (platform.x + (platform.width - i*200)), y: platform.y - 15, image: new Image(), platformID: platform.id})\n   }\n\n   for (let i = 3; i < powercubes.length; i++) {\n     let randomno = Math.floor(Math.random() * (3) + 1)\n     randomno === 1 ? powercubes[i].image.src = \"assets/images/powercube_purple.png\" : randomno === 2 ? powercubes[i].image.src = \"assets/images/powercube_green.png\" : powercubes[i].image.src = \"assets/images/powercube_white.png\"\n     context.drawImage(powercubes[i].image,powercubes[i].x,powercubes[i].y,15,15)\n   }\n   return powercubes.filter(cube => (\n     cube.platformID === platform.id\n   ))\n\n }}\n\n\n  for (let i = 0; i < calcCubes(); i++) {\n\n    powercubes.push({x: (platform.x + (platform.width - i*200)), y: platform.y - 15, image: new Image(), platformID: platform.id})\n  }\n\n  for (let i = 0; i < powercubes.length; i++) {\n    let randomno = Math.floor(Math.random() * (3) + 1)\n    randomno === 1 ? powercubes[i].image.src = \"assets/images/powercube_purple.png\" : randomno === 2 ? powercubes[i].image.src = \"assets/images/powercube_green.png\" : powercubes[i].image.src = \"assets/images/powercube_white.png\"\n    context.drawImage(powercubes[i].image,powercubes[i].x,powercubes[i].y,15,15)\n  }\n\n  return powercubes.filter(cube => (\n    cube.platformID === platform.id\n  ))\n\n}\n\n\nexport const move = (context, platform, id, popped) => {\n  for (let i = 0; i < powercubes.length; i++) {\n    if(platform.id === powercubes[i].platformID && !popped.includes(powercubes[i].x)){ powercubes[i].x = platform.x + (platform.width - i*200);\n    context.drawImage(powercubes[i].image,powercubes[i].x,powercubes[i].y,15,15)\n\n  } else if (platform.id === powercubes[i].platformID && popped.includes(powercubes[i].x)){\n      powercubes[i].src = \"\"\n      powercubes[i].y = -100\n  }}\n\n\n  let filter = powercubes.filter(cube =>(\n    cube.platformID === platform.id)\n  )\n  return filter\n\n}\n\nexport const clearpowercubes = (num) => {\n  if (num){\n    powercubes = powercubes.filter(powercube => powercube.platformID >= num)\n  } else powercubes = [];\n}\n\nexport const calcCubes = () => (\n  Math.floor(Math.random() * (3 - 0 + 1))\n)\n\nexport const restartFind = (id) => {\n  return powercubes.filter(cube => (\n    cube.platformID === id\n  ))\n}\n\n\n\n// WEBPACK FOOTER //\n// ./lib/powerup.js","import * as Vehicle from './vehicle.js'\nimport * as Platform from './platform.js'\nimport * as Obstacle from './obstacle.js'\nimport * as PowerCube from './powerup.js'\n\n\n\n\n\ndocument.addEventListener(\"DOMContentLoaded\", () => {\n  const canvas = $(\"canvas\")[0]\n  const context = canvas.getContext(\"2d\")\n  const width = 800\n  const height = 400\n\n  var interval_id;\n  var player;\n  var platforms;\n  var previousplatform;\n  var score = 0;\n  var pause = {clicked: false, gamePaused: false}\n  var token;\n  var lives = 5;\n\tvar started = false;\n\tvar ended = false;\n\n\n\tconst startScreen = () => {\n\t\tif (started === false){\n\t\t\tcontext.clearRect(0,0, width, height)\n\t    context.fillText(`Press any key to start`, 200, 200)\n\t\t}\n\n\t}\n\n\tconst endScreen = () => {\n\n\t\tstarted = false\n\t\t// PowerCube.clearpowercubes()\n\t\t// Platform.clearPlatforms()\n\t\t// Vehicle.resetVehicle()\n\t\t// Obstacle.clearObstacles()\n\t\tscore = 0;\n\n\t\tvar pause = {clicked: false, gamePaused: false}\n\t\ttoken = null;\n\t\tlives = 5;\n\t\tstarted = false\n\t\tcontext.fillText(`You Lose, press any key to restart`, 200, 200)\n\n\t\tif (ended === false){\n\t\t\tcontext.beginPath();\n\t\t\tcontext.globalCompositeOperation = \"source-over\";\n\t\t\tcontext.globalAlpha = 1;\n\t\t\tinit()\n\t\t}\n\n\t}\n\n\n\n\n  context.fillStyle = \"white\"\n  context.fillRect(0,0,width,height)\n  context.strokeStyle = \"black\";\n  context.strokeRect(0, 0, width, height);\n\n  var pausebutton = new Image()\n  pausebutton.src = \"assets/images/pause_button.png\"\n\n  var gamebackground = new Image()\n  gamebackground.src = \"assets/images/starbackground.jpg\"\n\n\tconst drawLives = () => {\n\t\tlet currentpos = 30\n\n\t\tfor (var i = 0; i < lives; i++) {\n\t\t\tcontext.beginPath();\n\t\t\tcontext.arc(currentpos, 60, 15, 0, 2 * Math.PI, false);\n\t\t\tcontext.fillStyle = '#099cff';\n\t\t\tcontext.fill();\n\t\t\tcontext.lineWidth = 3;\n\t\t\tcontext.strokeStyle = '#099cff';\n\t\t\tcontext.stroke();\n\t\t\tcontext.lineWidth = 1;\n\t\t\tcontext.strokeStyle = 'white';\n\t\t\tcontext.stroke();\n\t\t\tcurrentpos += 35\n\t\t}\n\t\tfor (var i = 0; i < (5 - lives); i++) {\n\t\t\tcontext.beginPath();\n\t\t\tcontext.arc(currentpos, 60, 15, 0, 2 * Math.PI, false);\n\t\t\tcontext.lineWidth = 3;\n\t\t\tcontext.strokeStyle = '#099cff';\n\t\t\tcontext.stroke();\n\t\t\tcontext.lineWidth = 1;\n\t\t\tcontext.strokeStyle = 'white';\n\t\t\tcontext.stroke();\n\t\t\tcurrentpos += 35\n\t\t}\n\n\t\tcontext.fillStyle = 'white';\n\n\t}\n\n\n\n  const init = (token) => {\n\n\t\tcontext.clearRect(0,0, width, height)\n\n\t\tif (lives === 5){\n\t\t\tcontext.drawImage(gamebackground,0, 0, width , height);\n\t\t\tplatforms = Platform.clearPlatforms()\n\t\t\tplatforms = Platform.init(context, token)\n\t\t\tplayer = Vehicle.init(context)\n\t\t\tinterval_id = setInterval(move, 1000/60);\n\t\t\treturn\n\t\t}\n\n    if (lives > 0){\n      context.drawImage(gamebackground,0, 0, width , height);\n\t\t\tplayer = Vehicle.init(context)\n\t\t\tplatforms = Platform.init(context, token)\n      interval_id = setInterval(move, 1000/60);\n    } else {\n\t\t\tconsole.log(\"bug\")\n    }\n\n  }\n\n  const onPlatform = (array) => {\n\t\tif (array){\n\t    for (var i = 0; i < array.length; i++) {\n\t      if ((player.x + 60 > array[i].x) && (player.x < array[i].x + 775) && (player.y < array[i].y) ) return true;\n\t    }\n\t}\n    return false;\n  }\n\n  const move = () => {\n    context.clearRect(0,0, width, height)\n    context.drawImage(gamebackground, 0 , 0, width, height);\n\n\t\tdrawLives()\n    context.drawImage(pausebutton,740,10,50,50)\n\n\n\n    let currentPlatform;\n\n    if (onPlatform(platforms)) {\n      let cp;\n      for (var i = 0; i < platforms.length; i++) {\n        if ((player.x + 60> platforms[i].x) && (player.x < platforms[i].x + (platforms[i].width - 25)) && player.y <= platforms[i].y - 20){\n           if (!cp || platforms[i].y < cp.y){\n             cp = platforms[i];\n           }\n        }\n      }\n      if (cp){\n        currentPlatform = cp;\n      }\n    }\n\n\n\n\n\n    if (currentPlatform){\n      previousplatform = currentPlatform;\n    }\n\n\n    if (currentPlatform && player.token === \"start\"){\n      player = Vehicle.move(currentPlatform)\n      platforms = Platform.move(context)\n    }\n    else if (currentPlatform) {\n      platforms = Platform.move(context)\n      player = Vehicle.move(currentPlatform)\n    }\n    else if (!currentPlatform && player.jumping === true){\n      player = Vehicle.move(previousplatform)\n      platforms = Platform.move(context)\n    }\n    else if (!currentPlatform){\n      token = \"falling\"\n      player = Vehicle.move(previousplatform, \"falling\")\n      platforms = Platform.move(context)\n    }\n\n    // loseconditions\n\n    if (player.y === 400){\n      clearInterval(interval_id)\n      player = Vehicle.resetVehicle()\n      lives -=1;\n\t\t\tif (lives > 0) {\n\t\t\t\tinit(\"restart\")\n\t\t\t} else {\n\t\t\t\tended = true\n\t\t\t\tendScreen();\n\t\t\t}\n    }\n\n\n\n    for (var i = 0; i < platforms.length; i++) {\n\t\t\t\tif (platforms[i].obstacles) {\n\t\t      if ( onPlatform(platforms) && (player.x > platforms[i].obstacles.x - 30 && player.x < platforms[i].obstacles.x -10) && player.y > platforms[i].obstacles.y - 30 && player.y < platforms[i].obstacles.y + 30){\n\n\t\t        console.log(\"you lose\")\n\t\t        clearInterval(interval_id)\n\t\t        player = Vehicle.resetVehicle()\n\t\t\t\t\t\tlives -= 1\n\n\n\t\t\t\t\t\tif (lives > 0) {\n\t\t\t\t\t\t\tinit(\"restart\")\n\t\t\t\t\t\t} else\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tended = true\n\t\t\t\t\t\t\tendScreen()\n\t\t\t\t\t\t}\n\n\t      } else if (inPCA(platforms[i]) !== false ){\n\t\t\t\t  let currentCube = inPCA(platforms[i])\n\t\t\t\t\t platforms[i].popped.push(currentCube.x)\n\t\t\t\t\t score += 5;\n\t\t\t }\n\n\n\t\t }\n\t\t}\n\n\n\n\t\t// context.font = \"normal normal 20px comic sans\";\n\t\tcontext.font         = '30px Arcade-Classic';\n    context.fillText(`Score: ${score}`, 16, 30)\n\n    if (currentPlatform === platforms[platforms.length - 1]) {\n      clearInterval(interval_id)\n\t\t\tplatforms = Platform.generatePlatforms(context)\n      interval_id = setInterval(move, 1000/60);\n\n    }\n  }\n\n\n  const handlePause = () => {\n    if (pause.clicked === true && pause.gamePaused === false){\n      clearInterval(interval_id)\n      pause.gamePaused = true\n      pause.clicked = false\n    } else if (pause.clicked === true && pause.gamePaused === true){\n\n      interval_id = setInterval(move, 1000/60)\n      pause.clicked = false;\n      pause.gamePaused = false;\n    }\n  }\n\n\n  const handleClick = (e) => {\n    let horizontalpos = e.clientX - e.target.offsetLeft\n    let verticalpos = e.clientY - e.target.offsetTop\n\n    if ((horizontalpos >= 740 && horizontalpos <= 790) && (verticalpos >= 10 && verticalpos <= 60)){\n      pause.clicked = true\n      handlePause();\n    }\n  }\n\n  const inPCA = (platform) => {\n    let cubes = platform.powercubes\n    for (var j = 0; j < cubes.length; j++) {\n       if (player.x === cubes[j].x - 30 && player.y > cubes[j].y - 30 && onPlatform(platforms) && player.y < cubes[j].y){\n         return cubes[j];\n       }\n    }\n    return false\n  }\n\n\n\tstartScreen()\n\n\n  $(window).keypress((e) => {\n\n\t\tif(started === false && ended === false){\n\t\t\tstarted = true\n\t\t\tinit()\n\t\t} else if(started === false && ended === true){\n\t\t\tended = false\n\t\t}\n    if (e.keyCode === 112) {\n     pause.clicked = true;\n     console.log(\"pausebutton\")\n     handlePause()\n   }\n })\n\n $(window).click(e => {\n   handleClick(e);\n })\n})\n\n\n\n// WEBPACK FOOTER //\n// ./lib/slipstream.js","\nexport const initialPlatforms = () => ([\n  {x: 200, y: 230, speed: 2, obstacles: null, powercubes: null, popped: [], width: 800, id: 1},\n  {x: 1050, y: 350, speed: 2, obstacles: null, powercubes: null, popped: [], width: 800, id: 2},\n  {x: 1800, y: 300, speed: 2, obstacles: null, powercubes: null, popped: [], width: 800, id: 3},\n  {x: 2650, y: 250, speed: 2, obstacles: null, powercubes: null, popped: [], width: 800, id: 4}\n])\n\n// Level things\n\nexport const platformGenerator = (endoflast, id) => {\n\nlet platforms = [\n  [\n  {x: (endoflast + 50), y: 230, speed: 2, obstacles: null, powercubes: null, popped: [], width: widthGenerator(), id: id+1},\n  {x: (endoflast + 900), y: 350, speed: 2, obstacles: null, powercubes: null, popped: [], width: widthGenerator(), id: id+2},\n  {x: (endoflast + 900), y: 200, speed: 2, obstacles: null, powercubes: null, popped: [], width: widthGenerator(), id: id+3},\n  {x: (endoflast + 1750), y: 260, speed: 2, obstacles: null, powercubes: null, popped: [], width: widthGenerator(), id: id+4}\n  ],[\n  {x: (endoflast + 60), y: 230, speed: 2, obstacles: null, powercubes: null, popped: [], width: widthGenerator(), id: id+1},\n  {x: (endoflast + 910), y: 350, speed: 2, obstacles: null, powercubes: null, popped: [], width: widthGenerator(), id: id+2},\n  {x: (endoflast + 1680), y: 300, speed: 2, obstacles: null, powercubes: null, popped: [], width: widthGenerator(), id: id+3},\n  {x: (endoflast + 2430), y: 250, speed: 2, obstacles: null, powercubes: null, popped: [], width: widthGenerator(), id: id+4}\n  ]\n]\n\n\nreturn platforms[Math.floor(Math.random()*platforms.length)].slice(0);\n\n}\n\nexport const widthGenerator = () => (\n  Math.floor(Math.random() * (800 - 700 + 1)) + 700\n)\n\n\n\n// WEBPACK FOOTER //\n// ./lib/platform-arrays.js"],"sourceRoot":""}